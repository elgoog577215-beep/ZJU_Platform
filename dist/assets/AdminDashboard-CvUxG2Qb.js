import{a as r,j as e,A as U,m as E}from"./react-vendor-CXoD4tGQ.js";import{ay as B,M as V,F as q,ai as J,d as X,az as ke,h as te,n as u,b as O,X as G,aA as oe,G as de,aB as K,af as Ce,aC as ce,C as Se,ab as H,aD as Y,c as xe,aE as ze,aF as $e,a as De,U as Z,S as se,aG as ae,aH as Q,ae as ie,aI as ne,aJ as me,a0 as Le,aK as he,aa as ue,ar as ee,aL as ge,an as be,e as Fe,R as pe,aM as Me,aN as Ie,aO as le,ag as Ee,aP as Pe,L as Ae,aQ as re,f as Te}from"./ui-vendor-ChojsKpE.js";import{u as $,d as f,D as Ue}from"./index-D24czYHj.js";import{T as Oe}from"./TagInput-gN0k0_Qy.js";import"./three-vendor-CkDWRuyZ.js";import"./utils-Cv9gmu_1.js";const A=({title:t,value:l,icon:c,color:o,onClick:s})=>e.jsxs("button",{onClick:s,className:"bg-[#111] p-6 rounded-2xl border border-white/10 text-left hover:border-indigo-500/50 hover:bg-[#161616] transition-all group relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-${o}-500/10 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-${o}-500/20 flex items-center justify-center text-${o}-400 mb-4 group-hover:scale-110 transition-transform`,children:e.jsx(c,{size:24})}),e.jsx("h3",{className:"text-3xl font-bold text-white mb-1",children:l}),e.jsx("p",{className:"text-gray-400 text-sm font-medium uppercase tracking-wider",children:t})]})]}),Re=({onChangeTab:t})=>{const{t:l}=$(),[c,o]=r.useState({counts:{photos:0,music:0,videos:0,articles:0,events:0},system:{uptime:0,nodeVersion:"",platform:""}}),[s,g]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const n=await f.get("/stats");o(n.data)}catch(n){console.error("Failed to fetch stats",n)}finally{g(!1)}})()},[]);const j=i=>{const n=Math.floor(i/86400),m=Math.floor(i%(3600*24)/3600),d=Math.floor(i%3600/60);return`${n}d ${m}h ${d}m`};return s?e.jsx("div",{className:"p-8 text-center text-gray-500",children:l("admin.overview_ui.loading_stats")}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[e.jsx(A,{title:l("admin.tabs.photos"),value:c.counts.photos,icon:B,color:"indigo",onClick:()=>t("photos")}),e.jsx(A,{title:l("admin.tabs.music"),value:c.counts.music,icon:V,color:"pink",onClick:()=>t("music")}),e.jsx(A,{title:l("admin.tabs.videos"),value:c.counts.videos,icon:q,color:"red",onClick:()=>t("videos")}),e.jsx(A,{title:l("admin.tabs.articles"),value:c.counts.articles,icon:J,color:"yellow",onClick:()=>t("articles")}),e.jsx(A,{title:l("admin.tabs.events"),value:c.counts.events,icon:X,color:"green",onClick:()=>t("events")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(ke,{size:20,className:"text-indigo-400"}),l("admin.overview_ui.system_status")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:l("admin.overview_ui.node_version")}),e.jsx("span",{className:"font-mono text-white",children:c.system.nodeVersion})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:l("admin.overview_ui.platform")}),e.jsx("span",{className:"font-mono text-white capitalize",children:c.system.platform})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:l("admin.overview_ui.uptime")}),e.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-mono",children:[e.jsx(te,{size:14}),j(c.system.uptime)]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/20 to-purple-900/20 p-6 rounded-2xl border border-white/10 flex flex-col justify-center text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:l("admin.overview_ui.welcome_back")}),e.jsx("p",{className:"text-gray-400 mb-6",children:l("admin.overview_ui.control_text")}),e.jsx("button",{onClick:()=>t("pending"),className:"mx-auto px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-colors shadow-lg shadow-indigo-500/20",children:l("admin.overview_ui.check_pending")})]})]})]})},We=()=>{const{t}=$(),[l,c]=r.useState([]),[o,s]=r.useState(!0);r.useEffect(()=>{g()},[]);const g=async()=>{s(!0);try{const i=await f.get("/admin/pending");c(i.data)}catch{u.error(t("admin.pending_review_ui.load_fail"))}finally{s(!1)}},j=async(i,n,m="")=>{try{await f.put(`/${i.type}/${i.id}/status`,{status:n,reason:m}),c(d=>d.filter(N=>!(N.id===i.id&&N.type===i.type))),u.success(t(n==="approved"?"admin.pending_review_ui.approved_success":"admin.pending_review_ui.rejected_success"))}catch{u.error(t("admin.pending_review_ui.action_fail"))}};return o?e.jsx("div",{className:"p-8 text-center text-gray-500",children:t("admin.pending_review_ui.loading")}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(te,{size:20,className:"text-yellow-400"}),t("admin.pending_review_ui.title")," (",l.length,")"]}),e.jsx("button",{onClick:g,className:"text-sm text-gray-400 hover:text-white underline",children:t("admin.pending_review_ui.refresh")})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(U,{children:l.length===0?e.jsxs("div",{className:"p-12 text-center border border-white/5 rounded-2xl border-dashed",children:[e.jsx(O,{size:48,className:"mx-auto text-green-500/50 mb-4"}),e.jsx("p",{className:"text-gray-500 font-bold",children:t("admin.pending_review_ui.all_caught_up")}),e.jsx("p",{className:"text-gray-600 text-sm",children:t("admin.pending_review_ui.no_pending")})]}):l.map(i=>e.jsxs(E.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"bg-[#111] border border-white/10 rounded-2xl p-4 flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[e.jsxs("div",{className:"w-full sm:w-24 h-24 bg-black rounded-xl overflow-hidden flex-shrink-0 border border-white/5 relative",children:[i.preview_image?e.jsx("img",{src:i.preview_image,alt:i.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-700",children:t("admin.pending_review_ui.no_img")}),e.jsx("div",{className:"absolute top-1 left-1 px-1.5 py-0.5 bg-black/60 rounded text-[10px] font-bold uppercase text-white backdrop-blur-sm",children:i.type})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-lg font-bold text-white truncate",children:i.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-400 mt-1",children:[e.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded",children:["ID: ",i.id]}),i.uploader_id&&e.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded",children:[t("admin.pending_review_ui.user_label")," ",i.uploader_id]}),i.category&&e.jsx("span",{className:"bg-white/5 px-2 py-1 rounded",children:i.category})]}),i.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-2 line-clamp-1",children:i.description})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto mt-2 sm:mt-0",children:[e.jsxs("button",{onClick:()=>j(i,"approved"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-green-600/20 text-green-400 hover:bg-green-600 hover:text-white rounded-xl font-bold transition-all border border-green-600/20",children:[e.jsx(O,{size:18})," ",t("admin.pending_review_ui.approve")]}),e.jsxs("button",{onClick:()=>j(i,"rejected",t("admin.pending_review_ui.admin_rejected")),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-red-600/20 text-red-400 hover:bg-red-600 hover:text-white rounded-xl font-bold transition-all border border-red-600/20",children:[e.jsx(G,{size:18})," ",t("admin.pending_review_ui.reject")]})]})]},`${i.type}-${i.id}`))})})]})},Be=()=>{const{t}=$(),[l,c]=r.useState({}),[o,s]=r.useState(!0),[g,j]=r.useState(!1);r.useEffect(()=>{i()},[]);const i=async()=>{s(!0);try{const d=await f.get("/settings");c(d.data)}catch{u.error(t("admin.toast.load_fail"))}finally{s(!1)}},n=async(d,N)=>{j(!0);try{await f.post("/settings",{key:d,value:N}),c(_=>({..._,[d]:N})),u.success(t("admin.toast.save_success"))}catch{u.error(t("admin.toast.save_fail"))}finally{j(!1)}},m=(d,N)=>{c(_=>({..._,[d]:N}))};return o?e.jsx("div",{className:"p-8 text-center text-gray-500",children:t("admin.loading_settings")}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(oe,{size:20,className:"text-indigo-400"}),t("admin.security_settings")]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-400",children:t("admin.invite_code_label")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:l.invite_code||"",onChange:d=>m("invite_code",d.target.value),placeholder:t("admin.enter_invite_code"),className:"flex-1 bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"}),e.jsx("button",{onClick:()=>n("invite_code",l.invite_code),disabled:g,className:"px-6 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-colors shadow-lg shadow-indigo-500/20 disabled:opacity-50",children:t("admin.save_btn")})]}),e.jsx("p",{className:"text-xs text-gray-500",children:t("admin.invite_code_desc")})]})})]}),e.jsxs("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(de,{size:20,className:"text-indigo-400"}),t("admin.general_settings")]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-400",children:t("admin.site_name_label")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",value:l.site_name||"777",onChange:d=>m("site_name",d.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"}),e.jsx("button",{onClick:()=>n("site_name",l.site_name),disabled:g,className:"px-6 bg-white/5 hover:bg-white/10 text-white rounded-xl font-bold transition-colors disabled:opacity-50",children:t("admin.save_btn")})]})]})})]})]})},fe=({item:t,level:l=0,onSelect:c,selectedPath:o})=>{const[s,g]=r.useState(!1),[j,i]=r.useState([]),[n,m]=r.useState(!1),d=async _=>{if(_.stopPropagation(),t.type==="file"){c(t);return}if(!s){m(!0);try{const a=await f.get("/fs/list",{params:{path:t.path}});i(a.data)}catch(a){console.error(a)}finally{m(!1)}}g(!s)},N=()=>t.type==="dir"?s?e.jsx(Y,{className:"text-yellow-400",size:16}):e.jsx(Y,{className:"text-yellow-400",size:16,fill:"currentColor"}):t.name.endsWith(".js")||t.name.endsWith(".jsx")||t.name.endsWith(".json")?e.jsx(K,{className:"text-cyan-400",size:16}):t.name.endsWith(".css")?e.jsx(K,{className:"text-blue-400",size:16}):t.name.endsWith(".md")?e.jsx(xe,{className:"text-gray-400",size:16}):t.name.match(/\.(jpg|jpeg|png|gif|svg)$/)?e.jsx(ze,{className:"text-purple-400",size:16}):e.jsx($e,{className:"text-gray-400",size:16});return e.jsxs("div",{children:[e.jsxs("div",{onClick:d,className:`flex items-center gap-2 py-1 px-2 cursor-pointer hover:bg-white/5 rounded select-none text-sm
          ${o===t.path?"bg-indigo-500/20 text-indigo-300 font-medium":"text-gray-300"}`,style:{paddingLeft:`${l*12+8}px`},children:[e.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-gray-500",children:t.type==="dir"&&(s?e.jsx(Se,{size:12}):e.jsx(H,{size:12}))}),N(),e.jsx("span",{className:"truncate",children:t.name})]}),s&&e.jsx("div",{className:"border-l border-white/5 ml-3",children:j.map(_=>e.jsx(fe,{item:_,level:l+1,onSelect:c,selectedPath:o},_.path))})]})},Ge=()=>{const{t}=$(),[l,c]=r.useState([]),[o,s]=r.useState(null),[g,j]=r.useState(""),[i,n]=r.useState(""),[m,d]=r.useState(!1),[N,_]=r.useState(!1);r.useEffect(()=>{f.get("/fs/list").then(y=>c(y.data)).catch(y=>console.error(y))},[]);const a=async y=>{if((o==null?void 0:o.path)!==y.path&&!(g!==i&&!window.confirm(t("admin.file_manager_ui.unsaved_confirm")))){s(y),d(!0);try{const k=(await f.get("/fs/content",{params:{path:y.path}})).data;j(k.content||""),n(k.content||"")}catch{u.error(t("admin.file_manager_ui.load_fail"))}finally{d(!1)}}},p=async()=>{if(o){_(!0);try{await f.post("/fs/content",{path:o.path,content:g}),n(g),u.success(t("admin.file_manager_ui.save_success"))}catch{u.error(t("admin.file_manager_ui.save_fail"))}finally{_(!1)}}};return e.jsxs("div",{className:"flex h-[calc(100vh-180px)] bg-[#0a0a0a] border border-white/10 rounded-2xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"w-64 border-r border-white/10 bg-[#111] flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-white/10 font-bold text-gray-400 text-xs uppercase tracking-wider",children:t("admin.file_manager_ui.explorer")}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:l.map(y=>e.jsx(fe,{item:y,onSelect:a,selectedPath:o==null?void 0:o.path},y.path))})]}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-12 border-b border-white/10 flex items-center justify-between px-4 bg-[#111]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300 font-mono",children:[e.jsx(K,{size:16,className:"text-indigo-400"}),o.path,g!==i&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(i),disabled:g===i,className:"p-2 hover:bg-white/10 rounded text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:t("admin.file_manager_ui.revert"),children:e.jsx(Ce,{size:16})}),e.jsxs("button",{onClick:p,disabled:g===i||N,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-600/50 disabled:cursor-not-allowed text-white px-3 py-1.5 rounded text-xs font-bold transition-all",children:[N?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(ce,{size:14}),t("admin.file_manager_ui.save")]})]})]}),e.jsx("div",{className:"flex-1 relative",children:m?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin"})}):e.jsx("textarea",{value:g,onChange:y=>j(y.target.value),className:"w-full h-full bg-[#0a0a0a] text-gray-300 font-mono text-sm p-4 resize-none focus:outline-none",spellCheck:!1})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsx("p",{children:t("admin.file_manager_ui.select_hint")})]})})})]})},Ke=()=>{const{t}=$(),[l,c]=r.useState([]),[o,s]=r.useState(!0),[g,j]=r.useState(""),[i,n]=r.useState(null),[m,d]=r.useState(!1),[N,_]=r.useState(""),[a,p]=r.useState(""),[y,D]=r.useState(null);r.useEffect(()=>{k()},[]);const k=async()=>{try{s(!0);const h=await f.get("/admin/users");Array.isArray(h.data)?c(h.data):(console.error("Unexpected response format:",h.data),c([]))}catch(h){console.error("Failed to fetch users:",h),u.error(t("common.error_fetching_data"))}finally{s(!1)}},S=h=>{D(h)},F=async()=>{var h,b;if(y)try{await f.delete(`/admin/users/${y}`),c(w=>w.filter(C=>C.id!==y)),u.success(t("admin.toast.delete_success"))}catch(w){u.error(((b=(h=w.response)==null?void 0:h.data)==null?void 0:b.error)||t("admin.toast.delete_fail"))}finally{D(null)}},I=h=>{n(h),p(h.role),_(""),d(!0)},R=async()=>{var h,b;try{const w={};if(a!==i.role&&(w.role=a),N&&(w.password=N),Object.keys(w).length===0){d(!1);return}await f.put(`/admin/users/${i.id}`,w),c(C=>C.map(L=>L.id===i.id?{...L,...w}:L)),u.success(t("admin.toast.save_success")),d(!1)}catch(w){u.error(((b=(h=w.response)==null?void 0:h.data)==null?void 0:b.error)||t("admin.toast.save_fail"))}},P=l.filter(h=>h.username.toLowerCase().includes(g.toLowerCase()));return o?e.jsx("div",{className:"flex justify-center p-12",children:e.jsx(De,{className:"animate-spin text-indigo-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-[#111] p-4 rounded-2xl border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Z,{size:24,className:"text-indigo-400"})," ",t("admin.users_manage")]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("input",{type:"text",placeholder:t("admin.search_placeholder"),value:g,onChange:h=>j(h.target.value),className:"w-full bg-black/50 border border-white/10 rounded-xl pl-10 pr-4 py-2 text-white focus:outline-none focus:border-indigo-500"}),e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16})]})]}),e.jsx("div",{className:"bg-[#111] border border-white/10 rounded-2xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white/5 border-b border-white/10 text-gray-400 text-xs uppercase tracking-wider",children:[e.jsx("th",{className:"p-4",children:t("admin.fields.username")}),e.jsx("th",{className:"p-4",children:t("admin.fields.role")}),e.jsx("th",{className:"p-4",children:t("admin.fields.created_at")}),e.jsx("th",{className:"p-4 text-right",children:t("admin.actions")})]})}),e.jsxs("tbody",{className:"divide-y divide-white/5",children:[P.map(h=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600/20 flex items-center justify-center text-indigo-400 font-bold text-xs",children:h.username.charAt(0).toUpperCase()}),e.jsx("span",{className:"font-bold text-white",children:h.username})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${h.role==="admin"?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"}`,children:h.role})}),e.jsx("td",{className:"p-4 text-gray-400 text-sm",children:new Date(h.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>I(h),className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 text-gray-400 hover:text-indigo-400 transition-colors",title:t("admin.edit_user"),children:e.jsx(ae,{size:16})}),e.jsx("button",{onClick:()=>S(h.id),className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 text-gray-400 hover:text-red-400 transition-colors",title:t("admin.delete_user"),children:e.jsx(Q,{size:16})})]})})]},h.id)),P.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-8 text-center text-gray-500",children:t("admin.no_items")})})]})]})})}),e.jsx(U,{children:m&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>d(!1),children:e.jsxs(E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-[#1a1a1a] border border-white/10 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl p-6",onClick:h=>h.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Z,{size:24,className:"text-indigo-400"})," ",t("admin.edit_user")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.fields.username")}),e.jsx("input",{type:"text",value:i==null?void 0:i.username,disabled:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-gray-500 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.fields.role")}),e.jsxs("select",{value:a,onChange:h=>p(h.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"user",children:t("admin.user_manager_ui.role_user")}),e.jsx("option",{value:"admin",children:t("admin.user_manager_ui.role_admin")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-400 mb-2 flex items-center gap-2",children:[e.jsx(oe,{size:14})," ",t("admin.fields.new_password")]}),e.jsx("input",{type:"password",value:N,onChange:h=>_(h.target.value),placeholder:t("admin.fields.password_placeholder"),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("admin.fields.password_hint")})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 rounded-xl font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:t("admin.cancel")}),e.jsx("button",{onClick:R,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold transition-colors shadow-lg shadow-indigo-500/25",children:t("admin.save")})]})]})})}),e.jsx(U,{children:y&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md bg-[#1a1a1a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center text-red-500 mb-4",children:e.jsx(ie,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t("admin.delete_confirm")}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:t("admin.delete_user_confirm")}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx("button",{onClick:()=>D(null),className:"flex-1 py-3 rounded-xl font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:t("admin.cancel")}),e.jsx("button",{onClick:F,className:"flex-1 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold transition-colors shadow-lg shadow-red-500/25",children:t("admin.delete_user")})]})]})})})})]})},He=()=>{const{t}=$(),[l,c]=r.useState(!1),[o,s]=r.useState(null);r.useEffect(()=>{f.get("/stats").then(i=>s(i.data))},[]);const g=async()=>{c(!0);try{const i=document.createElement("a");i.href=`${f.defaults.baseURL}/db/backup`,i.setAttribute("download",`backup-${Date.now()}.sqlite`),document.body.appendChild(i),i.click(),i.remove(),u.success(t("admin.database.toast_start"))}catch{u.error(t("admin.database.toast_fail"))}finally{c(!1)}},j=i=>{if(!i)return"0 B";const n=1024,m=["B","KB","MB","GB"],d=Math.floor(Math.log(i)/Math.log(n));return parseFloat((i/Math.pow(n,d)).toFixed(2))+" "+m[d]};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(ne,{size:20,className:"text-indigo-400"}),t("admin.database.title")]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 mb-8 flex gap-4 items-start",children:[e.jsx(ie,{className:"text-yellow-500 flex-shrink-0",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-yellow-500 mb-1",children:t("admin.database.warning_title")}),e.jsx("p",{className:"text-sm text-yellow-200/70",children:t("admin.database.warning_desc")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(me,{size:18,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-bold text-gray-400",children:t("admin.database.size")})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:o?j(o.system.dbSize):"..."})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ne,{size:18,className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-bold text-gray-400",children:t("admin.database.records")})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:o?Object.values(o.counts).reduce((i,n)=>i+n,0):"..."})]})]}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:t("admin.database.backup_title")}),e.jsx("p",{className:"text-sm text-gray-400",children:t("admin.database.backup_desc")})]}),e.jsxs("button",{onClick:g,disabled:l,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-colors shadow-lg shadow-indigo-500/20 disabled:opacity-50",children:[e.jsx(Le,{size:18}),t(l?"admin.database.preparing":"admin.database.download")]})]})})]})})},Qe=()=>{const{t}=$(),[l,c]=r.useState([]),[o,s]=r.useState(!0),[g,j]=r.useState({page:1,total:0,totalPages:1}),i=async(n=1)=>{s(!0);try{const m=await f.get(`/audit-logs?page=${n}&limit=20`);c(m.data.data),j(m.data.pagination)}catch{u.error("Failed to load audit logs")}finally{s(!1)}};return r.useEffect(()=>{i()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-600/20 flex items-center justify-center text-indigo-400",children:e.jsx(he,{size:20})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:t("admin.audit_logs.title")})]}),e.jsxs("div",{className:"bg-[#111] rounded-2xl border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white/5 text-gray-400 text-xs uppercase tracking-wider",children:[e.jsx("th",{className:"p-4",children:t("admin.audit_logs.time")}),e.jsx("th",{className:"p-4",children:t("admin.audit_logs.admin")}),e.jsx("th",{className:"p-4",children:t("admin.audit_logs.action")}),e.jsx("th",{className:"p-4",children:t("admin.audit_logs.resource")}),e.jsx("th",{className:"p-4",children:t("admin.audit_logs.details")})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:o?e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:[t("common.loading"),"..."]})}):l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:t("admin.audit_logs.no_logs")})}):l.map(n=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4 text-gray-400 text-sm font-mono",children:new Date(n.created_at).toLocaleString()}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"font-bold text-white",children:n.admin_name||t("admin.system_user")})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase
                        ${n.action==="approved"?"bg-green-500/20 text-green-400":n.action==="rejected"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:t(`admin.audit_logs.actions.${n.action}`)||n.action})}),e.jsxs("td",{className:"p-4 text-sm text-gray-300",children:[t(`admin.tabs.${n.resource_type}`)||n.resource_type," #",n.resource_id]}),e.jsx("td",{className:"p-4 text-sm text-gray-500 italic",children:n.reason||"-"})]},n.id))})]})}),g.totalPages>1&&e.jsxs("div",{className:"p-4 border-t border-white/10 flex items-center justify-center gap-4",children:[e.jsx("button",{disabled:g.page===1,onClick:()=>i(g.page-1),className:"p-2 bg-white/5 rounded-lg disabled:opacity-50 hover:bg-white/10 transition-colors",children:e.jsx(ue,{size:16})}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Page ",g.page," of ",g.totalPages]}),e.jsx("button",{disabled:g.page===g.totalPages,onClick:()=>i(g.page+1),className:"p-2 bg-white/5 rounded-lg disabled:opacity-50 hover:bg-white/10 transition-colors",children:e.jsx(H,{size:16})})]})]})]})},Ve=()=>{const{t}=$(),[l,c]=r.useState("home"),[o,s]=r.useState({}),[g,j]=r.useState(!0),[i,n]=r.useState(!1);r.useEffect(()=>{m()},[]);const m=async()=>{j(!0);try{const a=await f.get("/settings");s(a.data)}catch{u.error(t("admin.toast.load_fail"))}finally{j(!1)}},d=(a,p)=>{s(y=>({...y,[a]:p}))},N=async()=>{n(!0);try{const a=Object.keys(o).filter(p=>l==="home"?p.startsWith("hero_")||p.startsWith("site_"):l==="about"?p.startsWith("about_")||p.startsWith("profile_"):l==="contact"?p.startsWith("contact_")||p.startsWith("social_"):!1);for(const p of a)await f.post("/settings",{key:p,value:o[p]});u.success(t("admin.toast.save_success"))}catch{u.error(t("admin.toast.save_fail"))}finally{n(!1)}},_=[{id:"home",label:t("nav.home"),icon:de},{id:"about",label:t("nav.about"),icon:xe},{id:"contact",label:t("nav.contact"),icon:ee}];return g?e.jsx("div",{className:"p-8 text-center text-gray-500",children:t("admin.audit_logs.loading")}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10 flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-600/20 flex items-center justify-center text-indigo-400",children:e.jsx(ge,{size:20})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:t("admin.editor.title")})]}),e.jsx("div",{className:"flex bg-black/40 p-1 rounded-xl border border-white/10",children:_.map(a=>e.jsxs("button",{onClick:()=>c(a.id),className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${l===a.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/25":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(a.icon,{size:14}),a.label]},a.id))})]}),e.jsx("div",{className:"bg-[#111] p-6 rounded-2xl border border-white/10",children:e.jsxs("div",{className:"space-y-6 max-w-3xl",children:[l==="home"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.site_title")}),e.jsx("input",{type:"text",value:o.site_title||"",onChange:a=>d("site_title",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.favicon_url")}),e.jsx("input",{type:"text",value:o.favicon_url||"",onChange:a=>d("favicon_url",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.hero_title")}),e.jsx("input",{type:"text",value:o.hero_title||"",onChange:a=>d("hero_title",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.hero_subtitle")}),e.jsx("input",{type:"text",value:o.hero_subtitle||"",onChange:a=>d("hero_subtitle",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.hero_bg_url")}),e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{type:"text",value:o.hero_bg_url||"",onChange:a=>d("hero_bg_url",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})}),o.hero_bg_url&&e.jsx("img",{src:o.hero_bg_url,alt:t("admin.fields.preview"),className:"mt-4 h-32 w-full object-cover rounded-xl border border-white/10"})]})]}),l==="about"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.about_title")}),e.jsx("input",{type:"text",value:o.about_title||"",onChange:a=>d("about_title",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.about_subtitle")}),e.jsx("input",{type:"text",value:o.about_subtitle||"",onChange:a=>d("about_subtitle",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.profile_image_url")}),e.jsx("input",{type:"text",value:o.profile_image_url||"",onChange:a=>d("profile_image_url",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"}),o.profile_image_url&&e.jsx("img",{src:o.profile_image_url,alt:t("admin.fields.preview"),className:"mt-4 w-32 h-32 object-cover rounded-full border border-white/10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.intro_p")}),e.jsx("textarea",{value:o.about_intro||"",onChange:a=>d("about_intro",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500 h-24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.detail_p")}),e.jsx("textarea",{value:o.about_detail||"",onChange:a=>d("about_detail",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500 h-32"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.exp_years")}),e.jsx("input",{type:"text",value:o.about_exp_years||"",onChange:a=>d("about_exp_years",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.exhibitions")}),e.jsx("input",{type:"text",value:o.about_exhibitions||"",onChange:a=>d("about_exhibitions",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.projects")}),e.jsx("input",{type:"text",value:o.about_projects||"",onChange:a=>d("about_projects",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]})]})]}),l==="contact"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.contact_email")}),e.jsx("input",{type:"text",value:o.contact_email||"",onChange:a=>d("contact_email",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.contact_phone")}),e.jsx("input",{type:"text",value:o.contact_phone||"",onChange:a=>d("contact_phone",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.address")}),e.jsx("input",{type:"text",value:o.contact_address||"",onChange:a=>d("contact_address",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("h4",{className:"text-white font-bold mb-4",children:t("admin.editor.social_links")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.github_url")}),e.jsx("input",{type:"text",value:o.social_github||"",onChange:a=>d("social_github",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.twitter_url")}),e.jsx("input",{type:"text",value:o.social_twitter||"",onChange:a=>d("social_twitter",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.instagram_url")}),e.jsx("input",{type:"text",value:o.social_instagram||"",onChange:a=>d("social_instagram",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:t("admin.editor.linkedin_url")}),e.jsx("input",{type:"text",value:o.social_linkedin||"",onChange:a=>d("social_linkedin",a.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-white/10",children:e.jsxs("button",{onClick:N,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-all shadow-lg shadow-indigo-500/20 disabled:opacity-50",children:[e.jsx(ce,{size:18}),t(i?"admin.file_manager_ui.saving":"admin.editor.save_changes")]})})]})})]})},T=({title:t,apiEndpoint:l,type:c,icon:o})=>{const{t:s}=$(),[g,j]=r.useState([]),[i,n]=r.useState(!0),[m,d]=r.useState({page:1,total:0,totalPages:1}),[N,_]=r.useState(""),[a,p]=r.useState(!1),[y,D]=r.useState(null),[k,S]=r.useState({}),[F,I]=r.useState(!1),P=(()=>{switch(c){case"image":return[{name:"title",type:"text",label:s("admin.fields.title")},{name:"category",type:"text",label:s("admin.fields.category")},{name:"url",type:"file",label:s("admin.fields.url")},{name:"tags",type:"tag-input",label:s("admin.fields.tags")},{name:"size",type:"text",label:s("admin.fields.size")},{name:"featured",type:"checkbox",label:s("admin.fields.featured")}];case"audio":return[{name:"title",type:"text",label:s("admin.fields.title")},{name:"artist",type:"text",label:s("admin.fields.artist")},{name:"category",type:"text",label:s("admin.fields.category")},{name:"audio",type:"file",label:s("admin.fields.audio")},{name:"cover",type:"file",label:s("admin.fields.cover")},{name:"duration",type:"number",label:s("admin.fields.duration")},{name:"tags",type:"tag-input",label:s("admin.fields.tags")},{name:"featured",type:"checkbox",label:s("admin.fields.featured")}];case"video":return[{name:"title",type:"text",label:s("admin.fields.title")},{name:"category",type:"text",label:s("admin.fields.category")},{name:"video",type:"file",label:s("admin.fields.video")},{name:"thumbnail",type:"file",label:s("admin.fields.thumbnail")},{name:"tags",type:"text",label:s("admin.fields.tags")},{name:"featured",type:"checkbox",label:s("admin.fields.featured")}];case"article":return[{name:"title",type:"text",label:s("admin.fields.title")},{name:"tag",type:"text",label:s("admin.fields.category")},{name:"date",type:"date",label:s("admin.fields.date")},{name:"cover",type:"file",label:s("admin.fields.cover")},{name:"excerpt",type:"textarea",label:s("admin.fields.excerpt")},{name:"content",type:"textarea",label:s("admin.fields.content")},{name:"tags",type:"text",label:s("admin.fields.tags")},{name:"featured",type:"checkbox",label:s("admin.fields.featured")}];case"event":return[{name:"title",type:"text",label:s("admin.fields.title")},{name:"date",type:"date",label:s("admin.fields.date")},{name:"location",type:"text",label:s("admin.fields.location")},{name:"category",type:"text",label:s("admin.fields.category")},{name:"image",type:"file",label:s("admin.fields.image")},{name:"description",type:"textarea",label:s("admin.fields.description")},{name:"link",type:"text",label:s("admin.fields.link")},{name:"status",type:"select",label:s("admin.fields.status"),options:["upcoming","ongoing","past"]},{name:"tags",type:"tag-input",label:s("admin.fields.tags")},{name:"featured",type:"checkbox",label:s("admin.fields.featured")}];default:return[]}})(),h=async(x=1)=>{n(!0);try{const v=new Date().getTime(),z=await f.get(`/${l}?page=${x}&limit=10&search=${N}&status=all&_t=${v}`);j(z.data.data),d(z.data.pagination)}catch(v){console.error("Fetch error:",v),u.error(s("admin.toast.fetch_error"))}finally{n(!1)}};r.useEffect(()=>{h()},[l,c]);const b=x=>{x.preventDefault(),h(1)},[w,C]=r.useState(null),L=x=>{C(x)},je=async()=>{var x,v;if(w)try{console.log(`Deleting item ${w} from ${l}...`),await f.delete(`/${l}/${w}`),u.success(s("admin.toast.delete_success")),h(m.page)}catch(z){console.error("Delete failed:",z);const M=((v=(x=z.response)==null?void 0:x.data)==null?void 0:v.error)||z.message||s("admin.toast.delete_fail");u.error(M)}finally{C(null)}},we=x=>{D(x),S({...x}),p(!0)},ve=()=>{D(null),S({}),p(!0)},ye=async(x,v)=>{const z=x.target.files[0];if(!z)return;const M=new FormData;M.append("file",z),I(!0);try{const W=await f.post("/upload",M);S(_e=>({..._e,[v]:W.data.fileUrl})),u.success(s("admin.resource_manager_ui.upload_success"))}catch{u.error(s("admin.resource_manager_ui.upload_fail"))}finally{I(!1)}},Ne=async x=>{var v,z;x.preventDefault();try{y?(console.log(`Updating item ${y.id} in ${l}...`),await f.put(`/${l}/${y.id}`,k),u.success(s("admin.toast.update_success"))):(console.log(`Creating new item in ${l}...`),await f.post(`/${l}`,k),u.success(s("admin.toast.create_success"))),p(!1),h(m.page)}catch(M){console.error("Save failed:",M);const W=((z=(v=M.response)==null?void 0:v.data)==null?void 0:z.error)||M.message||s("admin.toast.save_fail");u.error(W)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between bg-[#111] p-4 rounded-2xl border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-600/20 flex items-center justify-center text-indigo-400",children:e.jsx(o,{size:20})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:t})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsxs("form",{onSubmit:b,className:"relative flex-1 sm:w-64",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsx("input",{type:"text",value:N,onChange:x=>_(x.target.value),placeholder:s("admin.search_placeholder"),className:"w-full bg-black border border-white/10 rounded-xl pl-10 pr-4 py-2 text-sm text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("button",{onClick:ve,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl font-bold text-sm transition-colors shadow-lg shadow-indigo-500/20",children:[e.jsx(be,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:s("admin.add_new")})]})]})]}),e.jsxs("div",{className:"bg-[#111] rounded-2xl border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-white/5 text-gray-400 text-xs uppercase tracking-wider",children:[e.jsx("th",{className:"p-4",children:s("admin.id")}),e.jsx("th",{className:"p-4",children:s("admin.fields.title")}),c==="image"&&e.jsx("th",{className:"p-4",children:s("admin.fields.preview")}),c==="music"&&e.jsx("th",{className:"p-4",children:s("admin.fields.artist")}),e.jsx("th",{className:"p-4",children:s("admin.fields.category")}),e.jsx("th",{className:"p-4 text-right",children:s("admin.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-500",children:s("admin.resource_manager_ui.loading")})}):g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-500",children:s("admin.no_items")})}):g.map(x=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsxs("td",{className:"p-4 text-gray-500 font-mono text-xs",children:["#",x.id]}),e.jsx("td",{className:"p-4 font-bold text-white",children:x.title}),c==="image"&&e.jsx("td",{className:"p-4",children:e.jsx("img",{src:x.url,alt:x.title,className:"w-12 h-12 object-cover rounded-lg border border-white/10"})}),c==="music"&&e.jsx("td",{className:"p-4 text-gray-400",children:x.artist}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 bg-white/5 rounded text-xs text-gray-400 border border-white/5",children:x.category})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>we(x),className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 text-gray-400 hover:text-indigo-400 transition-colors",children:e.jsx(ae,{size:16})}),e.jsx("button",{onClick:()=>L(x.id),className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(Q,{size:16})})]})})]},x.id))})]})}),m.totalPages>1&&e.jsxs("div",{className:"p-4 border-t border-white/10 flex items-center justify-center gap-4",children:[e.jsx("button",{disabled:m.page===1,onClick:()=>h(m.page-1),className:"p-2 bg-white/5 rounded-lg disabled:opacity-50 hover:bg-white/10 transition-colors",children:e.jsx(ue,{size:16})}),e.jsx("span",{className:"text-sm text-gray-400",children:s("admin.resource_manager_ui.pagination_info",{page:m.page,total:m.totalPages})}),e.jsx("button",{disabled:m.page===m.totalPages,onClick:()=>h(m.page+1),className:"p-2 bg-white/5 rounded-lg disabled:opacity-50 hover:bg-white/10 transition-colors",children:e.jsx(H,{size:16})})]})]}),e.jsx(U,{children:w&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:e.jsx(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md bg-[#111] border border-white/10 rounded-2xl shadow-2xl overflow-hidden p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center text-red-500 mb-4",children:e.jsx(ie,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:s("admin.delete_confirm")}),e.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:s("admin.delete_warning_desc")}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx("button",{onClick:()=>C(null),className:"flex-1 py-3 rounded-xl font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:s("admin.cancel")}),e.jsx("button",{onClick:je,className:"flex-1 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold transition-colors shadow-lg shadow-red-500/25",children:s("admin.delete")})]})]})})})}),e.jsx(U,{children:a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:e.jsxs(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-[#111] border border-white/10 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:s(y?"admin.edit_item":"admin.add_item")}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:e.jsx(G,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:e.jsx("form",{id:"resourceForm",onSubmit:Ne,className:"space-y-4",children:P.map(x=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:x.label}),x.type==="textarea"?e.jsx("textarea",{value:k[x.name]||"",onChange:v=>S({...k,[x.name]:v.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500 h-32"}):x.type==="tag-input"?e.jsx(Oe,{value:k[x.name]||"",onChange:v=>S({...k,[x.name]:v}),placeholder:x.label}):x.type==="file"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:k[x.name]||"",onChange:v=>S({...k,[x.name]:v.target.value}),className:"flex-1 bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500",placeholder:s("admin.resource_manager_ui.file_url_placeholder")}),e.jsxs("label",{className:"cursor-pointer bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl p-3 flex items-center justify-center transition-colors",children:[e.jsx(Fe,{size:20,className:"text-gray-400"}),e.jsx("input",{type:"file",className:"hidden",onChange:v=>ye(v,x.name),disabled:F})]})]}):x.type==="select"?e.jsx(Ue,{value:k[x.name],onChange:v=>S({...k,[x.name]:v}),options:x.options.map(v=>({value:v,label:s(`events.status.${v}`)||v})),placeholder:s("admin.resource_manager_ui.select_placeholder"),buttonClassName:"bg-black/40 border-white/10 w-full"}):x.type==="checkbox"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!k[x.name],onChange:v=>S({...k,[x.name]:v.target.checked}),className:"w-5 h-5 rounded border-gray-600 bg-black/40 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-white",children:s("admin.resource_manager_ui.yes")})]}):e.jsx("input",{type:x.type,value:k[x.name]||"",onChange:v=>S({...k,[x.name]:v.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-indigo-500"})]},x.name))})}),e.jsxs("div",{className:"p-6 border-t border-white/10 bg-black/20 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 rounded-xl font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:s("admin.cancel")}),e.jsx("button",{type:"submit",form:"resourceForm",disabled:F,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold transition-colors shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:s(F?"admin.resource_manager_ui.uploading":"admin.save")})]})]})})})]})},qe=()=>{const{t}=$(),[l,c]=r.useState([]),[o,s]=r.useState(!0),g=async()=>{s(!0);try{const n=await f.get("/admin/messages");c(n.data)}catch(n){console.error("Failed to fetch messages:",n),u.error(t("admin.messages.load_fail"))}finally{s(!1)}};r.useEffect(()=>{g()},[]);const j=async n=>{if(window.confirm(t("admin.messages.delete_confirm")))try{await f.delete(`/admin/messages/${n}`),c(m=>m.filter(d=>d.id!==n)),u.success(t("admin.messages.deleted"))}catch(m){console.error("Failed to delete message:",m),u.error(t("admin.messages.delete_fail"))}},i=async n=>{try{await f.put(`/admin/messages/${n}/read`),c(m=>m.map(d=>d.id===n?{...d,read:1}:d)),u.success(t("admin.messages.marked_read"))}catch(m){console.error("Failed to mark as read:",m),u.error(t("admin.messages.mark_fail"))}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(ee,{className:"text-indigo-400"})," ",t("admin.messages.title")]}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",title:t("admin.pending_review_ui.refresh"),children:e.jsx(pe,{size:20})})]}),o?e.jsx("div",{className:"text-center py-20 text-gray-500",children:t("admin.messages.loading")}):l.length===0?e.jsxs("div",{className:"text-center py-20 bg-[#111] rounded-2xl border border-white/5",children:[e.jsx(ee,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:t("admin.messages.no_messages")})]}):e.jsx("div",{className:"grid gap-4",children:l.map(n=>e.jsx("div",{className:`bg-[#111] border rounded-xl p-6 transition-all ${n.read?"border-white/5 opacity-75":"border-indigo-500/30 bg-indigo-900/5"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-start",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-lg text-white",children:n.name}),e.jsx("span",{className:"text-sm text-gray-500 bg-white/5 px-2 py-0.5 rounded-full border border-white/5",children:n.email}),!n.read&&e.jsx("span",{className:"text-xs bg-indigo-500 text-white px-2 py-0.5 rounded-full font-bold",children:t("admin.messages.new")})]}),e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:n.message}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2",children:[e.jsx(te,{size:12}),new Date(n.date).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 self-start md:self-center",children:[!n.read&&e.jsx("button",{onClick:()=>i(n.id),className:"p-2 hover:bg-green-500/10 text-green-500 rounded-lg transition-colors",title:t("admin.messages.mark_read"),children:e.jsx(O,{size:18})}),e.jsx("button",{onClick:()=>j(n.id),className:"p-2 hover:bg-red-500/10 text-red-500 rounded-lg transition-colors",title:t("admin.messages.delete"),children:e.jsx(Q,{size:18})})]})]})},n.id))})]})},Je=()=>{const{t}=$(),[l,c]=r.useState([]),[o,s]=r.useState(!0),[g,j]=r.useState(""),[i,n]=r.useState(null),[m,d]=r.useState(""),[N,_]=r.useState(!1),[a,p]=r.useState(""),[y,D]=r.useState(!1);r.useEffect(()=>{k()},[]);const k=async()=>{s(!0);try{const b=await f.get("/tags");c(b.data)}catch{u.error(t("admin.tag_manager.load_fail"))}finally{s(!1)}},S=async()=>{D(!0);try{await f.post("/tags/sync"),u.success(t("admin.tag_manager.sync_success")),k()}catch{u.error(t("admin.tag_manager.sync_fail"))}finally{D(!1)}},F=async()=>{var b,w;if(a.trim())try{const C=await f.post("/tags",{name:a});c([...l,C.data]),p(""),_(!1),u.success(t("admin.tag_manager.create_success"))}catch(C){u.error(((w=(b=C.response)==null?void 0:b.data)==null?void 0:w.error)||t("admin.tag_manager.create_fail"))}},I=async b=>{var w,C;if(m.trim())try{await f.put(`/tags/${b}`,{name:m}),c(l.map(L=>L.id===b?{...L,name:m}:L)),n(null),u.success(t("admin.tag_manager.update_success"))}catch(L){u.error(((C=(w=L.response)==null?void 0:w.data)==null?void 0:C.error)||t("admin.tag_manager.update_fail"))}},R=async b=>{if(window.confirm(t("admin.tag_manager.delete_confirm")))try{await f.delete(`/tags/${b}`),c(l.filter(w=>w.id!==b)),u.success(t("admin.tag_manager.delete_success"))}catch{u.error(t("admin.tag_manager.delete_fail"))}},P=b=>{n(b.id),d(b.name)},h=l.filter(b=>b.name.toLowerCase().includes(g.toLowerCase()));return e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-3xl p-8 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-3",children:[e.jsx(Me,{className:"text-indigo-400"}),t("admin.tag_manager.title")]}),e.jsx("p",{className:"text-gray-400",children:t("admin.tag_manager.subtitle")})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:S,disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-xl transition-colors disabled:opacity-50",children:[e.jsx(pe,{size:18,className:y?"animate-spin":""}),t("admin.tag_manager.sync_btn")]}),e.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold transition-colors shadow-lg shadow-indigo-500/20",children:[e.jsx(be,{size:18}),t("admin.tag_manager.create_btn")]})]})]}),N&&e.jsxs("div",{className:"mb-8 p-4 bg-indigo-500/10 border border-indigo-500/20 rounded-xl flex gap-4 items-center animate-in fade-in slide-in-from-top-4",children:[e.jsx("input",{type:"text",value:a,onChange:b=>p(b.target.value),placeholder:t("admin.tag_manager.name_placeholder"),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-2 text-white focus:outline-none focus:border-indigo-500",autoFocus:!0,onKeyDown:b=>b.key==="Enter"&&F()}),e.jsx("button",{onClick:F,className:"p-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors",children:e.jsx(O,{size:18})}),e.jsx("button",{onClick:()=>_(!1),className:"p-2 bg-white/5 hover:bg-white/10 text-white rounded-lg transition-colors",children:e.jsx(G,{size:18})})]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:18}),e.jsx("input",{type:"text",placeholder:t("admin.tag_manager.search_placeholder"),value:g,onChange:b=>j(b.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-white focus:outline-none focus:border-indigo-500 transition-colors"})]}),o?e.jsx("div",{className:"text-center py-12 text-gray-500",children:t("admin.tag_manager.loading")}):h.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 border border-white/5 rounded-2xl border-dashed",children:t("admin.tag_manager.no_tags")}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(b=>e.jsxs("div",{className:"bg-[#111] border border-white/5 rounded-xl p-4 flex justify-between items-center group hover:border-indigo-500/30 transition-all",children:[i===b.id?e.jsxs("div",{className:"flex gap-2 flex-1 mr-2",children:[e.jsx("input",{type:"text",value:m,onChange:w=>d(w.target.value),className:"flex-1 bg-black/40 border border-indigo-500 rounded px-2 py-1 text-white text-sm focus:outline-none",autoFocus:!0,onKeyDown:w=>w.key==="Enter"&&I(b.id)}),e.jsx("button",{onClick:()=>I(b.id),className:"text-green-400 hover:text-green-300",children:e.jsx(O,{size:16})}),e.jsx("button",{onClick:()=>n(null),className:"text-red-400 hover:text-red-300",children:e.jsx(G,{size:16})})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-white font-medium",children:b.name}),e.jsxs("span",{className:"text-xs bg-white/5 px-2 py-0.5 rounded-full text-gray-400",children:[b.count," ",t("admin.tag_manager.items_count")]})]}),e.jsx("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:i!==b.id&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P(b),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:e.jsx(ae,{size:14})}),e.jsx("button",{onClick:()=>R(b.id),className:"p-1.5 hover:bg-red-500/10 rounded-lg text-gray-400 hover:text-red-400 transition-colors",children:e.jsx(Q,{size:14})})]})})]},b.id))})]})},at=()=>{const{t}=$(),[l,c]=r.useState("overview"),[o,s]=r.useState(!1),[g,j]=r.useState(""),[i,n]=r.useState("");r.useEffect(()=>{const a=sessionStorage.getItem("admin_auth"),p=sessionStorage.getItem("token");a==="true"&&p&&s(!0)},[]);const m=async a=>{a.preventDefault();try{const p=await f.post("/auth/admin-login",{password:i});sessionStorage.setItem("token",p.data.token),sessionStorage.setItem("admin_auth","true"),s(!0),u.success(t("admin.login.welcome_back"))}catch(p){console.error("Login error:",p),u.error(t("admin.login.incorrect"))}},d=()=>{s(!1),sessionStorage.removeItem("admin_auth"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),u.success(t("admin.login.logged_out"))},N=[{id:"overview",label:t("admin.tabs.overview"),icon:Ie},{id:"pending",label:t("admin.tabs.pending"),icon:le},{id:"photos",label:t("admin.tabs.photos"),icon:B},{id:"music",label:t("admin.tabs.music"),icon:V},{id:"videos",label:t("admin.tabs.videos"),icon:q},{id:"articles",label:t("admin.tabs.articles"),icon:J},{id:"events",label:t("admin.tabs.events"),icon:X},{id:"pages",label:t("admin.tabs.pages"),icon:ge},{id:"files",label:t("admin.tabs.files"),icon:Y},{id:"database",label:t("admin.tabs.database"),icon:me},{id:"audit",label:t("admin.tabs.audit"),icon:he},{id:"settings",label:t("admin.tabs.settings"),icon:Ee},{id:"users",label:t("admin.tabs.users"),icon:Pe},{id:"messages",label:t("admin.tabs.messages"),icon:le},{id:"tags",label:t("admin.tabs.tags"),icon:B}],_=()=>{switch(l){case"overview":return e.jsx(Re,{onChangeTab:c});case"pending":return e.jsx(We,{});case"messages":return e.jsx(qe,{});case"tags":return e.jsx(Je,{});case"settings":return e.jsx(Be,{});case"files":return e.jsx(Ge,{});case"users":return e.jsx(Ke,{});case"database":return e.jsx(He,{});case"audit":return e.jsx(Qe,{});case"pages":return e.jsx(Ve,{});case"photos":return e.jsx(T,{title:t("admin.tabs.photos"),apiEndpoint:"photos",type:"image",icon:B},"photos");case"music":return e.jsx(T,{title:t("admin.tabs.music"),apiEndpoint:"music",type:"audio",icon:V},"music");case"videos":return e.jsx(T,{title:t("admin.tabs.videos"),apiEndpoint:"videos",type:"video",icon:q},"videos");case"articles":return e.jsx(T,{title:t("admin.tabs.articles"),apiEndpoint:"articles",type:"article",icon:J},"articles");case"events":return e.jsx(T,{title:t("admin.tabs.events"),apiEndpoint:"events",type:"event",icon:X},"events");default:return null}};return o?e.jsx("div",{className:"min-h-screen bg-black text-white pt-24 px-4 md:px-8 pb-12",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[e.jsxs("div",{className:"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-serif mb-2 bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-500",children:t("admin.dashboard")}),e.jsx("p",{className:"text-gray-400",children:t("admin.subtitle")})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-red-400 transition-colors bg-white/5 hover:bg-white/10 px-3 py-1.5 rounded-lg ml-auto",children:[e.jsx(Te,{size:14})," ",t("admin.logout")]}),e.jsx("p",{className:"text-xs text-gray-600 font-mono mt-2",children:new Date().toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"w-full lg:w-72 flex-shrink-0",children:[e.jsxs("div",{className:"bg-[#0a0a0a] rounded-2xl border border-white/10 p-4 space-y-2 sticky top-24 shadow-xl",children:[e.jsx("div",{className:"px-4 py-2 mb-2 text-xs font-bold text-gray-500 uppercase tracking-widest",children:t("admin.menu")}),N.map(a=>e.jsxs("button",{onClick:()=>c(a.id),className:`w-full flex items-center justify-between p-3.5 rounded-xl text-sm font-bold transition-all group
                    ${l===a.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/25 translate-x-1":"text-gray-400 hover:bg-white/5 hover:text-white hover:translate-x-1"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{size:20,className:l===a.id?"text-white":"text-gray-500 group-hover:text-white"}),a.label]}),l===a.id&&e.jsx(H,{size:16})]},a.id)),e.jsx("div",{className:"my-2 border-t border-white/10"}),e.jsx("a",{href:"/",className:"w-full flex items-center justify-between p-3.5 rounded-xl text-sm font-bold transition-all group text-gray-400 hover:bg-white/5 hover:text-white hover:translate-x-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{size:20,className:"text-gray-500 group-hover:text-white"}),t("nav.home")]})})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-indigo-900/20 to-purple-900/20 rounded-2xl p-6 border border-white/5 text-center",children:[e.jsx("p",{className:"text-xs text-indigo-300 font-bold uppercase tracking-wider mb-2",children:t("admin.pro_tip")}),e.jsx("p",{className:"text-sm text-gray-400",children:t("admin.pro_tip_desc")})]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:_()},l)})]})]})}):e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-[#111] border border-white/10 rounded-2xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-400",children:e.jsx(Ae,{size:32})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:t("admin.login.access")}),e.jsx("p",{className:"text-gray-400 text-sm",children:t("admin.login.prompt")})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"password",value:i,onChange:a=>n(a.target.value),placeholder:t("admin.login.placeholder"),className:"w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all text-center tracking-widest",autoFocus:!0})}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-indigo-500/20",children:t("admin.login.unlock")})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("a",{href:"/",className:"text-sm text-gray-500 hover:text-white transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{size:14})," ",t("admin.login.back")]})})]})})};export{at as default};
