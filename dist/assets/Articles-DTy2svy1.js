import{i as E,a as x,j as e,m as u,A as B}from"./react-vendor-CXoD4tGQ.js";import{S as L}from"./SmartImage-NGZcafy_.js";import{S as V,P as H,U as W}from"./SortSelector-D76W0eRq.js";import{u as X,a as q,f as G,d as $,F as z}from"./index-D24czYHj.js";import{u as J,m as g}from"./utils-Cv9gmu_1.js";import{e as K,ah as Q,ai as Y,d as Z,h as D,b as P,a9 as I,A as ee,X as te,U as se}from"./ui-vendor-ChojsKpE.js";import"./TagInput-gN0k0_Qy.js";import"./three-vendor-CkDWRuyZ.js";const me=()=>{var S;const{t:a}=X(),{settings:b}=q(),[f]=E(),[n,T]=x.useState(1),[v,j]=x.useState(null),[d,_]=x.useState("newest"),[r,p]=x.useState(null),[A,w]=x.useState(!1),h=b.pagination_enabled==="true"?6:1e3,{data:c,error:N,isLoading:U}=J(`/articles?page=${n}&limit=${h}&sort=${d}`,G),y=(c==null?void 0:c.data)||[],F=((S=c==null?void 0:c.pagination)==null?void 0:S.totalPages)||1;x.useEffect(()=>{const t=f.get("id");t&&$.get(`/articles/${t}`).then(s=>{s.data&&p(s.data)}).catch(s=>console.error("Failed to fetch deep linked article",s))},[f]);const k=t=>{const l=t?t.split(/\s+/).length:0;return`${Math.ceil(l/200)} ${a("common.min_read")}`},C=(t,s)=>{t.stopPropagation();const l=window.location.href;navigator.clipboard.writeText(`${s.title} - ${l}`),j(s.id),setTimeout(()=>j(null),2e3)},M=t=>{$.post("/articles",t).then(()=>{g(`/articles?page=${n}&limit=${h}&sort=${d}`)}).catch(s=>console.error("Failed to save article",s))},R=t=>{M(t)},O=t=>{T(t),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("section",{className:"pt-36 pb-12 md:py-24 px-4 md:px-8 min-h-screen flex items-center justify-center relative z-10",children:[e.jsxs("div",{className:"max-w-5xl w-full mx-auto relative",children:[e.jsx("div",{className:"absolute right-0 top-0 flex items-center gap-4 z-20",children:e.jsx("button",{onClick:()=>w(!0),className:"bg-white/10 hover:bg-white/20 text-white p-2 md:p-3 rounded-full backdrop-blur-md border border-white/10 transition-all",title:a("common.upload_article"),children:e.jsx(K,{size:18,className:"md:w-5 md:h-5"})})}),e.jsxs(u.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mb-8 md:mb-12 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-bold font-serif mb-3 md:mb-4",children:a("articles.title")}),e.jsx("p",{className:"text-gray-400 max-w-xl mx-auto text-sm md:text-base",children:a("articles.subtitle")})]}),e.jsx("div",{className:"flex flex-wrap justify-center items-center gap-4 mb-12",children:e.jsx(V,{sort:d,onSortChange:_})}),e.jsxs("div",{className:"space-y-6",children:[N&&e.jsxs("div",{className:"text-center py-20 text-gray-500",children:[e.jsx(Q,{size:48,className:"text-red-400 mb-4 opacity-50 mx-auto"}),e.jsx("p",{className:"text-gray-300 mb-6",children:a("common.error_fetching_data")||"Failed to load articles"}),e.jsx("button",{onClick:()=>g(`/articles?page=${n}&limit=${h}&sort=${d}`),className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-all border border-white/10",children:a("common.retry")||"Retry"})]}),y.length===0&&!U&&!N&&e.jsxs("div",{className:"text-center py-20 text-gray-500",children:[e.jsx(Y,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsx("p",{children:a("articles.no_articles")})]}),y.map((t,s)=>e.jsxs(u.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:s*.1},viewport:{once:!0},onClick:()=>p(t),className:"group relative bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl p-6 transition-all hover:border-white/20 cursor-pointer overflow-hidden hover:shadow-2xl hover:shadow-orange-500/10",children:[e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none overflow-hidden rounded-2xl",children:e.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-full bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full shine-effect"})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[t.cover&&e.jsx("div",{className:"w-full md:w-48 h-48 md:h-32 rounded-xl overflow-hidden flex-shrink-0",children:e.jsx(L,{src:t.cover,alt:t.title,type:"article",className:"w-full h-full",imageClassName:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700",iconSize:32})}),e.jsx("div",{className:"absolute top-4 right-4 flex gap-2 md:hidden",children:e.jsx(z,{itemId:t.id,itemType:"article",size:16,showCount:!0,count:t.likes||0,className:"p-2 bg-black/50 hover:bg-orange-500 rounded-full backdrop-blur-md transition-all group/btn border border-white/10",onToggle:(l,m)=>{g(`/articles?page=${n}&limit=${h}&sort=${d}`,i=>i&&{...i,data:i.data.map(o=>o.id===t.id?{...o,likes:m!==void 0?m:o.likes}:o)},!1)}})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Z,{size:12}),t.date]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{size:12}),k(t.content)]})]}),e.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-orange-400 transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-400 line-clamp-2",children:t.excerpt})]}),e.jsxs("div",{className:"hidden md:flex flex-col items-center justify-between pl-4 border-l border-white/5 py-2",children:[e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx(z,{itemId:t.id,itemType:"article",size:16,showCount:!0,count:t.likes||0,className:"p-2 bg-white/5 hover:bg-orange-500 rounded-full backdrop-blur-md transition-all border border-white/10",onToggle:(l,m)=>{g(`/articles?page=${n}&limit=${h}&sort=${d}`,i=>i&&{...i,data:i.data.map(o=>o.id===t.id?{...o,likes:m!==void 0?m:o.likes}:o)},!1)}}),e.jsx("button",{onClick:l=>C(l,t),className:"p-2 bg-white/5 hover:bg-white/20 text-gray-300 hover:text-white rounded-full backdrop-blur-md border border-white/10 transition-all",title:"Share",children:v===t.id?e.jsx(P,{size:16,className:"text-green-500"}):e.jsx(I,{size:16})})]}),e.jsx("div",{className:"p-3 rounded-full bg-white/5 group-hover:bg-orange-500 group-hover:text-black transition-all duration-300",children:e.jsx(ee,{size:20,className:"-rotate-45 group-hover:rotate-0 transition-transform duration-300"})})]})]})]},t.id))]}),b.pagination_enabled==="true"&&e.jsx(H,{currentPage:n,totalPages:F,onPageChange:O})]}),e.jsx(B,{children:r&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex items-center justify-center p-4 md:p-8 overflow-y-auto",onClick:()=>p(null),children:e.jsxs(u.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},onClick:t=>t.stopPropagation(),className:"relative w-full max-w-3xl bg-[#0a0a0a] border border-white/10 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"h-48 bg-gradient-to-br from-orange-900/40 to-black relative bg-cover bg-center",style:r.cover?{backgroundImage:`url(${r.cover})`}:{},children:[!r.cover&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-900/40 to-black"}),e.jsx("button",{onClick:()=>p(null),className:"absolute top-6 right-6 p-2 bg-black/50 text-white rounded-full hover:bg-white/20 transition-colors z-10",children:e.jsx(te,{size:24})}),e.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-8 bg-gradient-to-t from-[#0a0a0a] to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono text-orange-300 mb-2",children:[e.jsx("span",{children:r.date}),e.jsx("span",{children:"•"}),e.jsx("span",{children:k(r.content)})]}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-serif text-white leading-tight",children:r.title})]})]}),e.jsxs("div",{className:"p-8 md:p-12 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-8 pb-8 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden",children:e.jsx(se,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white",children:a("common.admin_name")}),e.jsx("div",{className:"text-xs text-gray-500",children:a("common.author")})]})]}),e.jsxs("button",{onClick:t=>C(t,r),className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-full hover:bg-white/10 text-sm font-bold text-gray-300 hover:text-white transition-all",children:[v===r.id?e.jsx(P,{size:16,className:"text-green-500"}):e.jsx(I,{size:16}),a("common.share")]})]}),e.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed",dangerouslySetInnerHTML:{__html:r.content}})]})]})})}),e.jsx(W,{isOpen:A,onClose:()=>w(!1),onUpload:R,type:"article"})]})};export{me as default};
