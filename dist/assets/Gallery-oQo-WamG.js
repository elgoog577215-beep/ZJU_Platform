import{a as r,j as e,m as M,A as L,R as Q,i as je}from"./react-vendor-CXoD4tGQ.js";import{B as ce,a0 as ye,a9 as ve,a2 as Ne,X as Y,aa as Se,ab as ke,g as Me,x as Ee,ac as Oe,h as Ae,n as $,ad as Ce,ae as ze,af as Te,ag as Pe,Y as de,e as _e,ah as Ie}from"./ui-vendor-ChojsKpE.js";import{c as Le,F as ue,u as R,a as Ge,d as F}from"./index-D24czYHj.js";import{Q as S,z as J,a4 as Z,K as Re,a5 as xe,a6 as Be,t as C,u as Ve,a7 as he,a8 as A,a9 as Ue,C as Fe,aa as D,ab as ee,ac as De,ad as fe,ae as Ke,af as He,ag as $e,ah as me,a0 as pe,Z as We}from"./three-vendor-CkDWRuyZ.js";import{L as Ye}from"./Image3DViewer-CJZlIX7C.js";import{S as Xe,P as qe,U as Qe}from"./SortSelector-D76W0eRq.js";import{S as Je}from"./SmartImage-NGZcafy_.js";import"./utils-Cv9gmu_1.js";import"./TagInput-gN0k0_Qy.js";const Ze=({photo:t,onClose:n,onNext:l,onPrev:o,onView3D:c,onLikeToggle:h})=>{const[x,a]=r.useState(!1),{user:d}=Le();r.useEffect(()=>{const s=b=>{b.key==="Escape"&&n(),b.key==="ArrowRight"&&l(),b.key==="ArrowLeft"&&o(),b.key==="i"&&a(m=>!m)};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n,l,o]);const f=async()=>{try{const b=await(await fetch(t.url)).blob(),m=window.URL.createObjectURL(b),g=document.createElement("a");g.href=m,g.download=t.title||"download",document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(m),$.success("Download started")}catch(s){console.error(s),$.error("Download failed")}},p=()=>{const s=window.location.href;navigator.clipboard.writeText(s).then(()=>{$.success("Link copied to clipboard")})},i={camera:"Sony A7R IV",lens:"FE 24-70mm GM",aperture:"f/2.8",shutter:"1/250s",iso:"100"};return e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/95 backdrop-blur-md p-4",onClick:n,children:[e.jsxs("div",{className:"absolute top-4 right-4 flex gap-4 z-50",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 backdrop-blur-md rounded-full p-1 border border-white/10",children:[e.jsx("button",{onClick:c,className:"p-3 text-white/70 hover:text-cyan-400 hover:bg-white/10 rounded-full transition-all",title:"3D View",children:e.jsx(ce,{size:20})}),e.jsx("div",{className:"w-px h-4 bg-white/20"}),e.jsx(ue,{itemId:t.id,itemType:"photo",className:"p-3 hover:bg-white/10 rounded-full",onToggle:h,favorited:t.favorited}),e.jsx("button",{onClick:f,className:"p-3 text-white/70 hover:text-green-400 hover:bg-white/10 rounded-full transition-all",title:"Download",children:e.jsx(ye,{size:20})}),e.jsx("button",{onClick:p,className:"p-3 text-white/70 hover:text-blue-400 hover:bg-white/10 rounded-full transition-all",title:"Share",children:e.jsx(ve,{size:20})}),e.jsx("button",{onClick:()=>a(!x),className:`p-3 rounded-full transition-all ${x?"text-white bg-white/20":"text-white/70 hover:text-white hover:bg-white/10"}`,title:"Info",children:e.jsx(Ne,{size:20})})]}),e.jsx("button",{onClick:n,className:"p-3 bg-black/40 hover:bg-red-500/20 text-white/70 hover:text-red-400 border border-white/10 rounded-full backdrop-blur-md transition-all",children:e.jsx(Y,{size:24})})]}),e.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full flex items-center justify-center",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute left-0 md:-left-16 p-4 text-white/50 hover:text-white transition-colors hover:bg-white/5 rounded-full",children:e.jsx(Se,{size:48})}),e.jsx(M.img,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:30},src:t.url,alt:t.title,className:"max-w-full max-h-[85vh] object-contain shadow-2xl rounded-sm"},t.id),e.jsx("button",{onClick:l,className:"absolute right-0 md:-right-16 p-4 text-white/50 hover:text-white transition-colors hover:bg-white/5 rounded-full",children:e.jsx(ke,{size:48})}),e.jsxs("div",{className:"absolute -bottom-16 left-0 right-0 text-center",children:[e.jsx("h3",{className:"text-2xl font-serif font-bold text-white mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-400 uppercase tracking-widest",children:t.category})]})]}),e.jsx(L,{children:x&&e.jsxs(M.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 bottom-0 w-80 bg-[#1a1a1a]/95 backdrop-blur-xl border-l border-white/10 p-6 z-[70] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Info"}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white",children:e.jsx(Y,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase mb-2",children:"Title"}),e.jsx("p",{className:"text-white text-lg font-serif",children:t.title})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase mb-2",children:"Category"}),e.jsx("span",{className:"px-3 py-1 bg-white/10 rounded-full text-sm text-white",children:t.category})]}),e.jsxs("div",{className:"border-t border-white/10 pt-6",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase mb-4",children:"EXIF Data"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[e.jsx(Me,{size:18,className:"text-indigo-400"}),e.jsx("span",{children:i.camera})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[e.jsx(Ee,{size:18,className:"text-pink-400"}),e.jsx("span",{children:i.lens})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[e.jsx(Oe,{size:18,className:"text-green-400"}),e.jsxs("span",{children:["ISO ",i.iso]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[e.jsx(Ae,{size:18,className:"text-yellow-400"}),e.jsx("span",{children:i.shutter})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-blue-400 flex items-center justify-center text-[10px]",children:"f"}),e.jsx("span",{children:i.aperture})]})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-6",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase mb-2",children:"Stats"}),e.jsxs("div",{className:"flex justify-between text-gray-300 text-sm",children:[e.jsx("span",{children:"Likes"}),e.jsx("span",{className:"text-white font-bold",children:t.likes||0})]}),e.jsxs("div",{className:"flex justify-between text-gray-300 text-sm mt-2",children:[e.jsx("span",{children:"Views"}),e.jsx("span",{className:"text-white font-bold",children:Math.floor(Math.random()*1e3)+100})]})]})]})]})})]})},j={MOVE_UP:"move_up",MOVE_DOWN:"move_down",MOVE_LEFT:"move_left",MOVE_RIGHT:"move_right",BOOST:"boost",SHOOT:"shoot"},X={[j.MOVE_UP]:["KeyW","ArrowUp"],[j.MOVE_DOWN]:["KeyS","ArrowDown"],[j.MOVE_LEFT]:["KeyA","ArrowLeft"],[j.MOVE_RIGHT]:["KeyD","ArrowRight"],[j.BOOST]:["ShiftLeft","ShiftRight"],[j.SHOOT]:["Mouse0","Space"]},te="skyfall_keybindings",q=()=>{try{const t=localStorage.getItem(te);if(t)return{...X,...JSON.parse(t)}}catch(t){console.error("Failed to load keybindings",t)}return X},re=t=>{try{localStorage.setItem(te,JSON.stringify(t))}catch(n){console.error("Failed to save keybindings",n)}},et=()=>(localStorage.removeItem(te),X),ne=t=>{switch(t){case j.MOVE_UP:return"Move Up";case j.MOVE_DOWN:return"Move Down";case j.MOVE_LEFT:return"Move Left";case j.MOVE_RIGHT:return"Move Right";case j.BOOST:return"Boost / Accelerate";case j.SHOOT:return"Shoot";default:return t}},P=t=>t?t.startsWith("Key")?t.slice(3):t.startsWith("Digit")||t.startsWith("Arrow")?t.slice(5):t==="Mouse0"?"Left Click":t==="Mouse1"?"Middle Click":t==="Mouse2"?"Right Click":t==="Space"?"Space":t.includes("Shift")?"Shift":t.includes("Control")?"Ctrl":t.includes("Alt")?"Alt":t:"---",tt=({isOpen:t,onClose:n,onSave:l})=>{const[o,c]=r.useState(q()),[h,x]=r.useState(null),[a,d]=r.useState(null);r.useEffect(()=>{t&&(c(q()),d(null))},[t]),r.useEffect(()=>{if(!h)return;const s=m=>{m.preventDefault(),m.stopPropagation(),f(h,m.code)},b=m=>{m.preventDefault(),m.stopPropagation(),f(h,`Mouse${m.button}`)};return window.addEventListener("keydown",s),window.addEventListener("mousedown",b),()=>{window.removeEventListener("keydown",s),window.removeEventListener("mousedown",b)}},[h]);const f=(s,b)=>{let m=null;if(Object.entries(o).forEach(([g,y])=>{g!==s&&y.includes(b)&&(m=g)}),m){d(`Key '${P(b)}' is already bound to ${ne(m)}`);return}c(g=>({...g,[s]:[b]})),x(null),d(null)},p=()=>{const s=et();c(s),re(s),l(s)},i=()=>{re(o),l(o),n()};return e.jsx(L,{children:t&&e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs(M.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},className:"bg-[#0f172a] border border-white/10 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-white/5",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white font-serif flex items-center gap-2",children:[e.jsx(Ce,{className:"w-6 h-6"})," Controls Configuration"]}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Y,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:Object.values(j).map(s=>{var b;return e.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-lg hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-gray-200 font-medium",children:ne(s)}),e.jsx("div",{className:"flex gap-2",children:(b=o[s])==null?void 0:b.map((m,g)=>e.jsx("button",{onClick:()=>x(s),className:`px-4 py-2 rounded font-mono text-sm font-bold min-w-[80px] border transition-all
                          ${h===s?"bg-cyan-500 text-black border-cyan-400 animate-pulse":"bg-black/40 border-white/20 text-cyan-400 hover:border-white/50"}`,children:h===s?"PRESS KEY":P(m)},`${s}-${g}`))})]},s)})}),e.jsxs("div",{className:"p-6 border-t border-white/10 bg-white/5 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center gap-2 text-yellow-500 h-6",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:16}),e.jsx("span",{className:"text-sm font-bold",children:a})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 rounded text-sm font-medium text-gray-400 hover:text-white hover:bg-white/10 transition-colors",children:[e.jsx(Te,{size:16})," Reset Defaults"]}),e.jsx("button",{onClick:i,className:"px-6 py-2 rounded bg-white text-black font-bold hover:bg-gray-200 transition-colors",children:"Save & Close"})]})]})]})})})},se=15,st=40,oe=14,ae=8,rt=40,nt=15,G=new D({color:"#ffffff",roughness:.4,metalness:.6}),ot=new D({color:"#88ccff",roughness:.2,metalness:.8,transparent:!0,opacity:.5}),at=new fe({color:"#00ffff",toneMapped:!1}),it=new fe({color:"#ffaa00",transparent:!0,opacity:.8}),ie=new Ke(.6,0),lt=new He(1.2,0),ct=new $e(2,1),W=new D({color:"#5a4a4a",roughness:.8,flatShading:!0}),dt=new D({color:"#ff3333",roughness:.5,emissive:"#550000"}),ut=new De(.1,1,4,8),xt=new me(.2,.2,.2);function ht({gameDataRef:t,meteorSystemRef:n}){const l=r.useRef(),o=r.useRef([]),c=r.useMemo(()=>new ee,[]);return r.useEffect(()=>{t.current&&(t.current.fireBullet=(h,x)=>{if(o.current.length===0)for(let d=0;d<100;d++)o.current.push({pos:new S,velocity:new S,active:!1});let a=o.current.find(d=>!d.active);if(a)if(a.active=!0,a.pos.copy(h),a.pos.z-=1.5,x){const d=new S().subVectors(x,h).normalize();a.velocity.copy(d).multiplyScalar(60)}else a.velocity.set(0,0,-60)})},[]),C((h,x)=>{if(!l.current)return;let a=0;o.current.forEach((d,f)=>{if(!d.active)return;if(d.pos.addScaledVector(d.velocity,x),d.pos.z<-100||Math.abs(d.pos.x)>50||Math.abs(d.pos.y)>50){d.active=!1;return}if(n.current&&n.current.checkCollision&&n.current.checkCollision(d.pos)){d.active=!1;return}c.position.copy(d.pos);const p=new S().copy(d.pos).add(d.velocity);c.lookAt(p),c.rotateX(Math.PI/2),c.updateMatrix(),l.current.setMatrixAt(a,c.matrix),a++}),l.current.count=a,a>0&&(l.current.instanceMatrix.needsUpdate=!0)}),e.jsx("instancedMesh",{ref:l,args:[ut,at,100]})}function ft({gameDataRef:t}){const n=r.useRef(),l=r.useRef([]),o=r.useMemo(()=>new ee,[]);return r.useEffect(()=>{for(let c=0;c<500;c++)l.current.push({pos:new S,vel:new S,life:0});t.current&&(t.current.spawnExplosion=(c,h=10)=>{let x=0;for(let a of l.current)if(a.life<=0&&(a.life=1,a.pos.copy(c),a.vel.set((Math.random()-.5)*15,(Math.random()-.5)*15,(Math.random()-.5)*15),x++,x>=h))break})},[]),C((c,h)=>{if(!n.current)return;let x=0;l.current.forEach((a,d)=>{a.life<=0||(a.life-=h*2,a.pos.addScaledVector(a.vel,h),o.position.copy(a.pos),o.scale.setScalar(a.life),o.rotation.x+=h*5,o.updateMatrix(),n.current.setMatrixAt(x,o.matrix),x++)}),n.current.count=x,x>0&&(n.current.instanceMatrix.needsUpdate=!0)}),e.jsx("instancedMesh",{ref:n,args:[xt,it,500]})}function mt({gameDataRef:t,meteorSystemRef:n,onHitPlayer:l}){const o=r.useRef(),c=r.useRef(),h=r.useRef(),x=r.useRef(),a=r.useRef([]),d=r.useMemo(()=>new ee,[]);r.useEffect(()=>{[{name:"shard",count:20,hp:3,score:100,scale:.8,radius:1.5,ref:o},{name:"boulder",count:10,hp:5,score:200,scale:1.2,radius:2,ref:c},{name:"titan",count:5,hp:8,score:300,scale:2,radius:3,ref:h},{name:"red",count:3,hp:5,score:500,scale:1,radius:1.5,ref:x}].forEach(i=>{for(let s=0;s<i.count;s++)a.current.push({type:i.name,pos:new S((Math.random()-.5)*50,(Math.random()-.5)*30,-Math.random()*200-50),rot:new he(Math.random(),Math.random(),0),rotSpeed:new S(Math.random(),Math.random(),Math.random()),hp:i.hp,maxHp:i.hp,active:!0,scale:i.scale,radius:i.radius,score:i.score,ref:i.ref})}),n&&(n.current={checkCollision:i=>{for(let s of a.current)if(s.active&&s.pos.z>-80&&s.pos.z<10&&s.pos.distanceTo(i)<s.radius+.5)return s.hp--,s.hp<=0?(t.current&&t.current.spawnExplosion&&t.current.spawnExplosion(s.pos,15),t.current&&t.current.addScore&&t.current.addScore(s.score),f(s)):t.current&&t.current.spawnExplosion&&t.current.spawnExplosion(s.pos,3),!0;return!1}})},[]);const f=p=>{p.active=!0,p.hp=p.maxHp,p.pos.z=-150-Math.random()*100,p.pos.x=(Math.random()-.5)*60,p.pos.y=(Math.random()-.5)*40};return C((p,i)=>{var g,y;const s=((g=t.current)==null?void 0:g.playerPos)||new S,b=((y=t.current)==null?void 0:y.speed)||se;let m={shard:0,boulder:0,titan:0,red:0};a.current.forEach(u=>{if(u.active){if(u.pos.z+=b*i,u.type==="red"&&u.pos.z>-60&&u.pos.z<0&&(u.pos.x=A.lerp(u.pos.x,s.x,i*1.5),u.pos.y=A.lerp(u.pos.y,s.y,i*1.5)),u.rot.x+=u.rotSpeed.x*i,u.rot.y+=u.rotSpeed.y*i,u.pos.z>-2&&u.pos.z<2&&u.pos.distanceTo(s)<u.radius+1){l(10),t.current&&t.current.spawnExplosion&&t.current.spawnExplosion(u.pos,20),f(u);return}u.pos.z>10&&f(u),d.position.copy(u.pos),d.rotation.copy(u.rot),d.scale.setScalar(u.scale),d.updateMatrix(),u.ref.current&&(u.ref.current.setMatrixAt(m[u.type],d.matrix),m[u.type]++)}}),o.current&&(o.current.count=m.shard,o.current.instanceMatrix.needsUpdate=!0),c.current&&(c.current.count=m.boulder,c.current.instanceMatrix.needsUpdate=!0),h.current&&(h.current.count=m.titan,h.current.instanceMatrix.needsUpdate=!0),x.current&&(x.current.count=m.red,x.current.instanceMatrix.needsUpdate=!0)}),e.jsxs("group",{children:[e.jsx("instancedMesh",{ref:o,args:[ie,W,20]}),e.jsx("instancedMesh",{ref:c,args:[lt,W,10]}),e.jsx("instancedMesh",{ref:h,args:[ct,W,5]}),e.jsx("instancedMesh",{ref:x,args:[ie,dt,3]})]})}function pt({gameDataRef:t,bindings:n}){const l=r.useRef(),o=r.useRef(),c=r.useRef(),{viewport:h,camera:x,pointer:a}=Ve(),d=r.useRef(new S(0,0,0)),f=r.useRef(new he(0,0,0)),p=r.useRef(100),i=r.useRef({up:!1,down:!1,left:!1,right:!1,boost:!1,shoot:!1}),s=(b,m)=>{var g;return(g=n[b])==null?void 0:g.includes(m)};return r.useEffect(()=>{const b=u=>{s(j.MOVE_UP,u.code)&&(i.current.up=!0),s(j.MOVE_DOWN,u.code)&&(i.current.down=!0),s(j.MOVE_LEFT,u.code)&&(i.current.left=!0),s(j.MOVE_RIGHT,u.code)&&(i.current.right=!0),s(j.BOOST,u.code)&&(i.current.boost=!0),s(j.SHOOT,u.code)&&(i.current.shoot=!0)},m=u=>{s(j.MOVE_UP,u.code)&&(i.current.up=!1),s(j.MOVE_DOWN,u.code)&&(i.current.down=!1),s(j.MOVE_LEFT,u.code)&&(i.current.left=!1),s(j.MOVE_RIGHT,u.code)&&(i.current.right=!1),s(j.BOOST,u.code)&&(i.current.boost=!1),s(j.SHOOT,u.code)&&(i.current.shoot=!1)},g=u=>{const N=`Mouse${u.button}`;s(j.SHOOT,N)&&(i.current.shoot=!0),s(j.BOOST,N)&&(i.current.boost=!0)},y=u=>{const N=`Mouse${u.button}`;s(j.SHOOT,N)&&(i.current.shoot=!1),s(j.BOOST,N)&&(i.current.boost=!1)};return window.addEventListener("keydown",b),window.addEventListener("keyup",m),window.addEventListener("mousedown",g),window.addEventListener("mouseup",y),()=>{window.removeEventListener("keydown",b),window.removeEventListener("keyup",m),window.removeEventListener("mousedown",g),window.removeEventListener("mouseup",y)}},[n]),C((b,m)=>{if(!l.current)return;let g=i.current.boost&&p.current>0;g?p.current=Math.max(0,p.current-rt*m):p.current=Math.min(100,p.current+nt*m);const y=g?st:se,u=(i.current.left?-1:0)+(i.current.right?1:0),N=(i.current.down?-1:0)+(i.current.up?1:0),z=g?25:15,k=5*m;d.current.x=A.lerp(d.current.x,u*z,k),d.current.y=A.lerp(d.current.y,N*z,k),l.current.position.x+=d.current.x*m,l.current.position.y+=d.current.y*m,l.current.position.x=A.clamp(l.current.position.x,-oe,oe),l.current.position.y=A.clamp(l.current.position.y,-ae,ae);const T=-d.current.x*.05;f.current.z=A.lerp(f.current.z,A.clamp(T,-.8,.8),k),f.current.x=A.lerp(f.current.x,d.current.y*.03,k),l.current.rotation.set(f.current.x,0,f.current.z);const _=new S(a.x,a.y,.5);_.unproject(x);const O=_.sub(x.position).normalize(),B=(-50-x.position.z)/O.z,K=x.position.clone().add(O.multiplyScalar(B));if(i.current.shoot&&Math.random()>.8&&t.current&&t.current.fireBullet&&t.current.fireBullet(l.current.position,K),o.current&&(o.current.rotation.z+=(g?40:20)*m),c.current){const V=g?2:1;c.current.scale.lerp(new S(V,V,V),.1)}const H=g?85:60;b.camera.fov=A.lerp(b.camera.fov,H,m*2),b.camera.updateProjectionMatrix(),t.current&&(t.current.playerPos.copy(l.current.position),t.current.speed=y,t.current.boostEnergy=p.current)}),e.jsxs("group",{ref:l,children:[e.jsx(Ue,{width:1.5,length:6,color:new Fe(0,1,1),attenuation:b=>b*b,children:e.jsx("mesh",{visible:!1,position:[0,0,.5]})}),e.jsx("mesh",{rotation:[Math.PI/2,0,0],material:G,children:e.jsx("cylinderGeometry",{args:[.4,.2,4,8]})}),e.jsx("mesh",{position:[0,.3,.5],rotation:[.2,0,0],material:ot,children:e.jsx("capsuleGeometry",{args:[.3,1,2,6]})}),e.jsx("mesh",{position:[0,0,.5],material:G,children:e.jsx("boxGeometry",{args:[3.5,.1,1.2]})}),e.jsxs("group",{position:[0,0,1.8],children:[e.jsx("mesh",{position:[0,.5,0],rotation:[.5,0,0],material:G,children:e.jsx("boxGeometry",{args:[.1,1.2,.8]})}),e.jsx("mesh",{position:[0,0,0],material:G,children:e.jsx("boxGeometry",{args:[1.8,.1,.6]})})]}),e.jsxs("group",{position:[0,0,-2.1],ref:o,children:[e.jsx("mesh",{material:G,children:e.jsx("boxGeometry",{args:[.1,2.8,.15]})}),e.jsx("mesh",{rotation:[0,0,Math.PI/2],material:G,children:e.jsx("boxGeometry",{args:[.1,2.8,.15]})})]}),e.jsx("group",{position:[0,0,2],ref:c,children:e.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.1,.4,8]}),e.jsx("meshBasicMaterial",{color:"#00ffff",transparent:!0,opacity:.6})]})})]})}function bt({gameDataRef:t,uiRef:n,health:l,onScoreUpdate:o}){const c=r.useRef(0);return r.useEffect(()=>{t.current&&(t.current.addScore=h=>{c.current+=h})},[]),C((h,x)=>{if(!(l<=0)&&n.current){const{speed:a,boostEnergy:d}=t.current,f=n.current.querySelector(".speed-val");f&&(f.innerText=(a*30).toFixed(0));const p=n.current.querySelector(".boost-bar");p&&(p.style.width=`${d}%`);const i=n.current.querySelector(".score-val");i&&(i.innerText=Math.floor(c.current).toString().padStart(6,"0"))}}),r.useEffect(()=>{l<=0&&o(Math.floor(c.current))},[l,o]),null}const gt=({onExit:t})=>{var g,y,u,N,z,k;const[n,l]=r.useState(100),[o,c]=r.useState(0),[h,x]=r.useState(!1),[a,d]=r.useState(q()),{t:f}=R(),p=r.useRef({playerPos:new S,speed:se,boostEnergy:100,fireBullet:null,spawnExplosion:null,addScore:null}),i=r.useRef(null),s=r.useRef(),b=T=>{l(_=>Math.max(0,_-T))},m=()=>{if(l(100),c(0),s.current){const T=s.current.querySelector(".score-val");T&&(T.innerText="000000")}p.current.boostEnergy=100};return e.jsxs("div",{className:"w-full h-full bg-gradient-to-b from-[#0f172a] to-[#1e293b] relative select-none overflow-hidden cursor-crosshair",children:[e.jsxs("div",{ref:s,className:"absolute top-0 left-0 w-full p-6 flex justify-between items-start z-10 pointer-events-none",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-cyan-400 text-4xl font-black font-mono tracking-tighter drop-shadow-[0_0_10px_rgba(34,211,238,0.8)] score-val",children:"000000"}),e.jsxs("div",{className:"text-cyan-200/70 text-xs font-mono mt-1",children:["SPEED: ",e.jsx("span",{className:"speed-val",children:"0"})," KM/H"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-yellow-400 font-bold font-mono text-xs",children:"BOOST"}),e.jsx("div",{className:"w-32 h-2 bg-black/50 border border-yellow-400/30 rounded overflow-hidden skew-x-[-12deg]",children:e.jsx("div",{className:"boost-bar h-full bg-yellow-400 shadow-[0_0_10px_#fbbf24]",style:{width:"100%"}})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-white font-bold font-mono text-xs",children:"SHIELD"}),e.jsx("div",{className:"w-48 h-4 bg-black/50 border border-white/20 rounded overflow-hidden skew-x-[-12deg]",children:e.jsx("div",{className:`h-full transition-all duration-300 ${n>50?"bg-cyan-400":"bg-red-500"}`,style:{width:`${n}%`}})})]}),e.jsxs("div",{className:"flex gap-2 pointer-events-auto",children:[e.jsx("button",{onClick:()=>x(!0),className:"bg-white/10 border border-white/20 text-white p-2 rounded hover:bg-white/20 transition-all",children:e.jsx(Pe,{size:20})}),e.jsx("button",{onClick:t,className:"bg-red-500/20 border border-red-500/50 text-red-200 px-6 py-2 rounded hover:bg-red-500 hover:text-white transition-all uppercase text-sm font-bold tracking-wider backdrop-blur-md",children:f("game.abort")})]})]})]}),e.jsx(tt,{isOpen:h,onClose:()=>x(!1),onSave:d}),n<=0&&e.jsxs("div",{className:"absolute inset-0 z-30 bg-black/80 flex items-center justify-center flex-col backdrop-blur-sm cursor-default",children:[e.jsx("h2",{className:"text-6xl font-black text-white mb-4 tracking-tighter",children:"MISSION FAILED"}),e.jsxs("p",{className:"text-gray-400 mb-8 font-mono",children:["FINAL SCORE: ",o]}),e.jsx("button",{onClick:m,className:"bg-white text-black px-8 py-3 font-bold hover:scale-105 transition-transform",children:"RESTART MISSION"})]}),e.jsx(J,{dpr:[1,1.5],performance:{min:.5},children:e.jsxs(r.Suspense,{fallback:null,children:[e.jsx(Z,{makeDefault:!0,position:[0,0,10],fov:60}),e.jsx("ambientLight",{intensity:.4}),e.jsx("directionalLight",{position:[10,20,5],intensity:1.5}),e.jsx("pointLight",{position:[-10,-10,-10],color:"#00ffff",intensity:.5}),e.jsx(Re,{radius:200,depth:50,count:1e3,factor:4,saturation:0,fade:!0,speed:.5}),e.jsx("fog",{attach:"fog",args:["#0f172a",20,120]}),e.jsx(bt,{gameDataRef:p,uiRef:s,health:n,onScoreUpdate:c}),e.jsx(pt,{gameDataRef:p,bindings:a}),e.jsx(ht,{gameDataRef:p,meteorSystemRef:i}),e.jsx(mt,{gameDataRef:p,meteorSystemRef:i,onHitPlayer:b}),e.jsx(ft,{gameDataRef:p}),e.jsx(xe,{preset:"city"})]})}),e.jsx(Be,{}),e.jsxs("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 text-white/30 font-mono text-xs pointer-events-none bg-black/20 px-4 py-2 rounded-full backdrop-blur-sm border border-white/5",children:[P((g=a.move_up)==null?void 0:g[0]),"/",P((y=a.move_left)==null?void 0:y[0]),"/",P((u=a.move_down)==null?void 0:u[0]),"/",P((N=a.move_right)==null?void 0:N[0])," to Fly • ",P((z=a.shoot)==null?void 0:z[0])," to Shoot • ",P((k=a.boost)==null?void 0:k[0])," to Boost"]})]})};function wt(){const t=r.useRef(),[n,l]=r.useState(!1);return C(o=>{n&&(t.current.position.y=Math.sin(o.clock.elapsedTime*10)*2,t.current.position.y<0&&(t.current.position.y=0,l(!1)))}),Q.useEffect(()=>{const o=c=>{(c.code==="Space"||c.code==="ArrowUp")&&l(!0)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]),e.jsx(pe,{ref:t,args:[.5,.5,.5],position:[0,0,0],children:e.jsx("meshStandardMaterial",{color:"#00ffcc",emissive:"#00ffcc",emissiveIntensity:2,toneMapped:!1})})}function jt(){const t=r.useRef();return C((n,l)=>{t.current.position.z+=10*l,t.current.position.z>5&&(t.current.position.z=0)}),e.jsxs("group",{ref:t,children:[e.jsx("gridHelper",{args:[100,100,16711935,16711935],position:[0,-.5,-20]}),e.jsx("gridHelper",{args:[100,100,16711935,16711935],position:[0,-.5,-70]})]})}function le({position:t}){const n=r.useRef();return C((l,o)=>{n.current.position.z+=15*o,n.current.position.z>10&&(n.current.position.z=-60,n.current.position.y=Math.random()*2)}),e.jsx(pe,{ref:n,args:[1,Math.random()*5+2,1],position:t,children:e.jsx("meshStandardMaterial",{color:"#220033",emissive:"#bd00ff",emissiveIntensity:.5,wireframe:!0})})}const yt=({onExit:t})=>{const[n,l]=r.useState(0),{t:o}=R();Q.useEffect(()=>{const x=setInterval(()=>l(a=>a+1),50);return()=>clearInterval(x)},[]);const c=r.useMemo(()=>Array.from({length:10},(x,a)=>({position:[-3,0,-a*8]})),[]),h=r.useMemo(()=>Array.from({length:10},(x,a)=>({position:[3,0,-a*8]})),[]);return e.jsxs("div",{className:"w-full h-full bg-black relative",children:[e.jsxs("div",{className:"absolute top-4 left-4 text-[#00ffcc] text-2xl font-bold z-10 font-mono italic",children:[o("game.score"),": ",n]}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-[#00ffcc] z-10 border border-[#00ffcc] px-6 py-2 hover:bg-[#00ffcc] hover:text-black transition-all skew-x-[-10deg]",children:o("game.abort")}),e.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none bg-[url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAADCAYAAABS3WWCAAAAE0lEQVQIW2NkYGD4z8DAwMgAAQAAYgcDA4h616AAAAAASUVORK5CYII=')] opacity-20"}),e.jsxs(J,{children:[e.jsx(Z,{makeDefault:!0,position:[0,2,5],rotation:[-.2,0,0]}),e.jsx("ambientLight",{intensity:.1}),e.jsx(jt,{}),e.jsx(wt,{}),c.map((x,a)=>e.jsx(le,{...x},`l-${a}`)),h.map((x,a)=>e.jsx(le,{...x},`r-${a}`)),e.jsx("fog",{attach:"fog",args:["#000000",5,25]}),e.jsx(xe,{preset:"city"})]})]})};function vt({position:t,onClick:n,id:l}){const o=r.useRef(),[c,h]=r.useState(!1);return C(x=>{o.current.rotation.x+=.01,o.current.rotation.y+=.01}),e.jsx(We,{speed:2,rotationIntensity:1,floatIntensity:1,children:e.jsxs("group",{position:t,children:[e.jsxs("mesh",{ref:o,onClick:x=>{x.stopPropagation(),n(l)},onPointerOver:()=>h(!0),onPointerOut:()=>h(!1),children:[e.jsx("boxGeometry",{args:[1,1,.1]}),e.jsx("meshStandardMaterial",{color:c?"#ff0055":"white"})]}),e.jsxs("lineSegments",{children:[e.jsx("edgesGeometry",{args:[new me(1.2,1.2,.2)]}),e.jsx("lineBasicMaterial",{color:c?"#ff0055":"gray"})]})]})})}const Nt=({onExit:t})=>{const[n,l]=r.useState(0),[o,c]=r.useState([]),{t:h}=R();Q.useEffect(()=>{const a=setInterval(()=>{const d=Math.random(),f=(Math.random()-.5)*10,p=(Math.random()-.5)*6,i=(Math.random()-.5)*5-5;c(s=>[...s,{id:d,position:[f,p,i]}]),setTimeout(()=>{c(s=>s.filter(b=>b.id!==d))},3e3)},1500);return()=>clearInterval(a)},[]);const x=a=>{l(d=>d+1),c(d=>d.filter(f=>f.id!==a))};return e.jsxs("div",{className:"w-full h-full bg-neutral-900 relative cursor-crosshair",children:[e.jsxs("div",{className:"absolute top-4 left-4 text-white text-2xl font-serif font-bold z-10",children:[h("game.captures"),": ",n]}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white z-10 bg-white/10 border border-white/20 px-6 py-2 rounded hover:bg-white/20 transition-all",children:h("game.finish")}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none border-[40px] border-black/20 z-0 flex flex-col justify-between p-10",children:[e.jsxs("div",{className:"flex justify-between text-white/50 font-mono text-xs",children:[e.jsx("span",{children:"ISO 400"}),e.jsx("span",{children:"1/500"}),e.jsx("span",{children:"f/2.8"})]}),e.jsx("div",{className:"w-full h-px bg-white/20 relative top-1/2 -translate-y-1/2"}),e.jsx("div",{className:"h-full w-px bg-white/20 absolute left-1/2 top-0 -translate-x-1/2"}),e.jsx("div",{className:"text-center text-white/50 font-mono text-xs",children:"RAW"})]}),e.jsxs(J,{children:[e.jsx(Z,{makeDefault:!0,position:[0,0,5]}),e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[10,10,10]}),o.map(a=>e.jsx(vt,{...a,onClick:x},a.id))]})]})},St=({onExit:t})=>{const[n,l]=r.useState([]),[o,c]=r.useState([]),[h,x]=r.useState([]),{t:a}=R();r.useEffect(()=>{const f=["#FF6B6B","#4ECDC4","#FFE66D","#1A535C"],p=[...f,...f].sort(()=>Math.random()-.5).map((i,s)=>({id:s,color:i}));l(p)},[]);const d=f=>{if(o.length===2||o.includes(f)||h.includes(f))return;const p=[...o,f];if(c(p),p.length===2){const[i,s]=p;n[i].color===n[s].color?(x(b=>[...b,i,s]),c([])):setTimeout(()=>c([]),1e3)}};return e.jsxs("div",{className:"relative w-full h-full bg-neutral-800 flex items-center justify-center flex-col",children:[e.jsx("h2",{className:"text-2xl text-white mb-8 font-serif",children:"Memory Pattern"}),e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-white/50 hover:text-white",children:a("game.exit")}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:n.map(f=>e.jsx(M.div,{className:"w-20 h-20 bg-neutral-700 rounded-lg cursor-pointer perspective-1000",onClick:()=>d(f.id),animate:{rotateY:o.includes(f.id)||h.includes(f.id)?180:0},children:e.jsxs("div",{className:"w-full h-full relative preserve-3d",children:[e.jsx("div",{className:"absolute inset-0 bg-neutral-600 rounded-lg backface-hidden"}),e.jsx("div",{className:"absolute inset-0 rounded-lg backface-hidden rotate-y-180",style:{backgroundColor:f.color}})]})},f.id))})]})},kt=({photo:t,onStart:n,onCancel:l})=>{const{t:o}=R();return e.jsx("div",{className:"absolute inset-0 z-[80] bg-black/80 backdrop-blur-md flex items-center justify-center p-4",children:e.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-neutral-900 border border-white/10 max-w-2xl w-full rounded-2xl overflow-hidden shadow-2xl flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-1/2 h-64 md:h-auto relative",children:[e.jsx("img",{src:t.url,className:"w-full h-full object-cover opacity-50"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-neutral-900 to-transparent"})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold font-serif text-white mb-2",children:t.gameType.toUpperCase()}),e.jsx("h3",{className:"text-blue-400 font-mono text-xs md:text-sm mb-4 md:mb-6 tracking-widest",children:o("game.intro_subtitle")}),e.jsx("p",{className:"text-gray-300 mb-6 text-sm leading-relaxed",children:t.gameDescription||o("game.default_desc")}),e.jsxs("div",{className:"bg-black/30 rounded p-4 mb-8 border border-white/5",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:o("game.controls")}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1 font-mono",children:[(t.gameType==="skyfall"||t.gameType==="冒险")&&e.jsx("li",{children:o("game.steer")}),(t.gameType==="runner"||t.gameType==="动作")&&e.jsx("li",{children:o("game.jump")}),(t.gameType==="shutter"||t.gameType==="摄影")&&e.jsx("li",{children:o("game.shoot")}),(t.gameType==="puzzle"||t.gameType==="益智")&&e.jsx("li",{children:o("game.flip")})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:n,className:"flex-1 bg-white text-black font-bold py-3 rounded hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(de,{size:18})," ",o("game.start")]}),e.jsx("button",{onClick:l,className:"px-4 py-3 rounded border border-white/20 text-white hover:bg-white/10 transition-colors",children:o("game.cancel")})]})]})]})})},Mt=({photo:t,onClose:n})=>{const[l,o]=r.useState(!0),[c,h]=r.useState(!1),x=()=>{o(!1),h(!0)},a=()=>{switch(t.gameType){case"skyfall":case"冒险":return e.jsx(gt,{onExit:n});case"runner":case"动作":return e.jsx(yt,{onExit:n});case"shutter":case"摄影":return e.jsx(Nt,{onExit:n});default:return e.jsx(St,{onExit:n})}};return e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black",children:[e.jsx(L,{children:l&&e.jsx(kt,{photo:t,onStart:x,onCancel:n})}),e.jsx(L,{children:c&&e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-full",children:a()},"game")}),!c&&e.jsx(M.img,{src:t.url,className:"absolute inset-0 w-full h-full object-cover opacity-20 blur-md"})]})},Lt=()=>{const[t]=je(),[n,l]=r.useState([]),[o,c]=r.useState(!0),[h,x]=r.useState(!1),[a,d]=r.useState(0),[f,p]=r.useState(1),[i,s]=r.useState(1),[b,m]=r.useState("newest"),[g,y]=r.useState(null),[u,N]=r.useState(null),[z,k]=r.useState(null),[T,_]=r.useState(!1),{t:O}=R(),{settings:B}=Ge();r.useEffect(()=>{const w=t.get("id");w&&F.get(`/photos/${w}`).then(v=>{v.data&&k(v.data)}).catch(v=>console.error("Failed to fetch deep linked photo",v))},[t]),r.useEffect(()=>{c(!0);const w=B.pagination_enabled==="true"?12:1e3,v={page:f,limit:w,sort:b};F.get("/photos",{params:v}).then(E=>{l(E.data.data),s(E.data.pagination.totalPages),c(!1)}).catch(E=>{console.error("Failed to fetch photos:",E),c(!1)})},[f,b,B.pagination_enabled]);const K=w=>{F.post("/photos",w).then(()=>{const v={page:f,limit:12};return F.get("/photos",{params:v})}).then(v=>{l(v.data.data),s(v.data.pagination.totalPages)}).catch(v=>console.error("Failed to save photo",v))},H=()=>{y(w=>(w+1)%n.length)},V=()=>{y(w=>(w-1+n.length)%n.length)},be=w=>{K(w)},ge=w=>{p(w),window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("section",{className:"pt-36 pb-32 md:py-20 px-4 md:px-8 min-h-screen",children:[e.jsxs(M.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mb-8 md:mb-12 relative z-40 text-center",children:[e.jsx("button",{onClick:()=>_(!0),className:"absolute right-0 top-0 md:top-2 bg-white/10 hover:bg-white/20 text-white p-2 md:p-3 rounded-full backdrop-blur-md border border-white/10 transition-all",title:O("common.upload_photo"),children:e.jsx(_e,{size:18,className:"md:w-5 md:h-5"})}),e.jsx("h2",{className:"text-3xl md:text-5xl lg:text-6xl font-bold font-serif mb-3 md:mb-4",children:O("gallery.title")}),e.jsx("p",{className:"text-gray-400 max-w-xl mx-auto mb-6 md:mb-8 text-sm md:text-base",children:O("gallery.subtitle")}),e.jsx("div",{className:"flex flex-wrap justify-center items-center gap-4 relative z-50",children:e.jsx(Xe,{sort:b,onSortChange:m})})]}),o?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-8 max-w-7xl mx-auto",children:[1,2,3,4].map(w=>e.jsx("div",{className:"bg-white/5 rounded-3xl h-64 md:h-80 animate-pulse"},w))}):h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(Ie,{size:48,className:"text-red-400 mb-4 opacity-50 mx-auto"}),e.jsx("p",{className:"text-gray-300 mb-6",children:O("common.error_fetching_data")||"Failed to load photos"}),e.jsx("button",{onClick:()=>d(w=>w+1),className:"px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-all border border-white/10",children:O("common.retry")||"Retry"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-8 max-w-7xl mx-auto",children:n.map((w,v)=>e.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"break-inside-avoid relative group overflow-hidden rounded-lg cursor-pointer border border-transparent hover:border-white/20 hover:shadow-2xl hover:shadow-white/5 transition-all duration-300",onClick:()=>y(v),children:[e.jsx(Je,{src:w.url,alt:w.title,type:"image",className:"w-full h-auto",imageClassName:"h-auto object-cover transform transition-transform duration-700 group-hover:scale-110"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-center text-center p-4",children:[e.jsx("h3",{className:"text-xl font-bold font-serif mb-2 translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:w.title}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-100",children:[e.jsxs("button",{onClick:E=>{E.stopPropagation(),N(w)},className:"flex items-center gap-2 bg-white text-black px-3 py-1.5 md:px-4 md:py-2 text-sm font-bold rounded-full hover:bg-gray-200 hover:scale-105",children:[e.jsx(de,{size:14,fill:"currentColor",className:"md:w-4 md:h-4"}),O("gallery.play")]}),e.jsx("button",{onClick:E=>{E.stopPropagation(),k(w)},className:"flex items-center gap-2 bg-black/50 border border-white/30 text-white px-3 py-1.5 md:px-4 md:py-2 text-sm font-bold rounded-full hover:bg-white hover:text-black hover:scale-105 backdrop-blur-sm transition-all",title:O("gallery.view_3d"),children:e.jsx(ce,{size:14,className:"md:w-4 md:h-4"})}),e.jsx(ue,{itemId:w.id,itemType:"photo",size:14,showCount:!0,count:w.likes||0,className:"flex items-center gap-2 bg-black/50 border border-white/30 px-3 py-1.5 md:px-4 md:py-2 text-sm font-bold rounded-full hover:bg-pink-500 hover:border-pink-500 hover:scale-105 backdrop-blur-sm transition-all",onToggle:(E,I)=>{l(we=>we.map(U=>U.id===w.id?{...U,likes:I!==void 0?I:U.likes}:U))}})]})]})]},w.id))}),B.pagination_enabled==="true"&&e.jsx(qe,{currentPage:f,totalPages:i,onPageChange:ge}),e.jsx(L,{children:g!==null&&e.jsx(Ze,{photo:n[g],onClose:()=>y(null),onNext:H,onPrev:V,onView3D:()=>{k(n[g]),y(null)},onLikeToggle:(w,v)=>{l(E=>E.map(I=>I.id===n[g].id?{...I,likes:v!==void 0?v:I.likes,favorited:w}:I))}})}),e.jsx(L,{children:u&&e.jsx(Mt,{photo:u,onClose:()=>N(null)})}),e.jsx(L,{children:z&&e.jsx(Ye,{photo:z,onClose:()=>k(null)})}),e.jsx(Qe,{isOpen:T,onClose:()=>_(!1),onUpload:be,type:"image"})]})};export{Lt as default};
